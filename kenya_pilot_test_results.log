ğŸš€ Starting AisleMarts Backend API Tests (Including Geographic Targeting System)
ğŸ“ Testing against: https://ai-marketplace-12.preview.emergentagent.com/api
================================================================================

ğŸ” Testing Health Check...
âœ… PASS: Health Check
   Details: Service: AisleMarts API

ğŸ” Testing User Registration...
âœ… PASS: User Registration
   Details: User may already exist: HTTP 400: {'detail': 'Email already in use'}

ğŸ” Testing User Login...
âœ… PASS: User Login
   Details: Successfully logged in and got token

ğŸ” Testing Vendor Login...
âœ… PASS: Vendor Login
   Details: Successfully logged in vendor and got token

ğŸ” Testing Protected Route (/auth/me)...
âœ… PASS: Protected Route Access
   Details: User: buyer@aislemarts.com

ğŸ” Testing Categories List...
âœ… PASS: Categories List
   Details: Found 3 categories

ğŸ” Testing Products List...
âœ… PASS: Products List
   Details: Found 7 products

ğŸ” Testing Product Details...
âœ… PASS: Product Details
   Details: Product: Wireless Bluetooth Headphones

ğŸ” Testing Product Search...
âœ… PASS: Product Search (title)
   Details: Found 2 results for 'headphones'
âœ… PASS: Product Search (brand)
   Details: Found 2 results for 'AudioTech'

ğŸ” Testing Category Filter...
âœ… PASS: Category Filter
   Details: Found 1 products in category

ğŸ” Testing Payment Intent Creation...
âŒ FAIL: Payment Intent Creation
   Details: HTTP 400: {'detail': 'Stripe error: Invalid API Key provided: sk_test_'}

ğŸ” Testing User Orders...
âœ… PASS: User Orders
   Details: Found 0 orders

ğŸ” Testing Order Details...
âŒ FAIL: Order Details
   Details: No order ID available for testing

ğŸ” Testing Error Scenarios...
âœ… PASS: Invalid Login Error
   Details: Correctly rejected invalid credentials
âœ… PASS: Unauthorized Access Error
   Details: Correctly rejected request without token
âœ… PASS: Invalid Product ID Error
   Details: Correctly returned 404 for invalid product

ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤– AI ENDPOINTS TESTING ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–ğŸ¤–

ğŸ” Testing AI Chat (Anonymous)...
âœ… PASS: AI Chat (Anonymous)
   Details: Response received: I can help you find the perfect headphones for work! Here are some options to consider based on diff...

ğŸ” Testing AI Chat (Authenticated)...
âœ… PASS: AI Chat (Authenticated)
   Details: Agent ID: aislemarts_agent_anonymous

ğŸ” Testing AI Locale Detection...
âœ… PASS: AI Locale Detection
   Details: Country: US, Currency: USD

ğŸ” Testing AI Product Recommendations (Anonymous)...
âœ… PASS: AI Product Recommendations (Anonymous)
   Details: Found 3 recommendations

ğŸ” Testing AI Product Recommendations (Authenticated)...
âœ… PASS: AI Product Recommendations (Authenticated)
   Details: Found 7 recommendations with AI explanation

ğŸ” Testing AI Search Enhancement...
âœ… PASS: AI Search Enhancement
   Details: Enhanced query processed

ğŸ” Testing AI Intent Analysis (Anonymous)...
âœ… PASS: AI Intent Analysis (Anonymous)
   Details: Intent analyzed: product_search

ğŸ” Testing AI Intent Analysis (Authenticated)...
âœ… PASS: AI Intent Analysis (Authenticated)
   Details: Intent: product_search

ğŸ” Testing AI Onboarding (Anonymous)...
âœ… PASS: AI Onboarding (Anonymous)
   Details: Guidance provided for buyer role

ğŸ” Testing AI Onboarding (Authenticated)...
âœ… PASS: AI Onboarding (Authenticated)
   Details: Personalized guidance for buyer

ğŸ” Testing AI Error Scenarios...
âœ… PASS: AI Chat Empty Message
   Details: Handled empty message appropriately
âœ… PASS: AI Recommendations Invalid Query
   Details: Handled invalid query

ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ BLUE ERA DASHBOARD BACKEND INTEGRATION TESTING ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™ğŸ’™

ğŸ’™ Testing Blue Era Trust Score API...
âŒ FAIL: Blue Era Trust Score API
   Details: HTTP 404: {'detail': 'User not found'}

ğŸ’™ Testing Blue Era AI Chat Service...
âœ… PASS: Blue Era AI Chat Service (Brand Insights)
   Details: Generated brand insights: Here are your daily insights for your brand on the AisleMarts marketplace:

### Daily Insights for [... (Agent: aislemarts_agent_anonymous)
âœ… PASS: Blue Era AI Chat Service (Shopper Insights)
   Details: Generated shopper insights: Here are your daily insights as a shopper on the AisleMarts marketplace:

### Daily Insights for You...

ğŸ’™ Testing Blue Era Products API for Product Reels...
âœ… PASS: Blue Era Products API for Reels
   Details: Found 7 products, 7 valid for reels. Sample: Wireless Bluetooth Headphones - $129.99 - 1 images

ğŸ’™ Testing Blue Era AI Recommendations...
âœ… PASS: Blue Era AI Recommendations
   Details: Generated 5 recommendations with AI insights. Valid: 5
âœ… PASS: Blue Era AI Recommendations (Authenticated)
   Details: Generated 7 personalized recommendations

ğŸ’™ Testing Blue Era Auth Identity Profile API...
âŒ FAIL: Blue Era Auth Identity Profile API
   Details: HTTP 404: {'detail': 'User identity not found'}

ğŸ’™ Testing Blue Era Role-Based Responses...
âœ… PASS: Blue Era Role-Based Responses (Brand)
   Details: Brand-focused response generated with 5 relevant terms
âœ… PASS: Blue Era Role-Based Responses (Shopper)
   Details: Shopper-focused response generated with 6 relevant terms

ğŸ’™ Testing Blue Era Authentication Context...
âœ… PASS: Blue Era Authentication Context (Authenticated)
   Details: Personalized response with agent ID: aislemarts_agent_anonymous
âœ… PASS: Blue Era Authentication Context (Anonymous)
   Details: Generic response for anonymous user

ğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒ GEOGRAPHIC TARGETING SYSTEM TESTING ğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒğŸŒ

ğŸŒ Testing Geographic Data Initialization...
âœ… PASS: Geographic Data Initialization
   Details: World cities and countries initialized successfully

ğŸŒ Testing Countries List...
âœ… PASS: Countries List
   Details: Found 13 countries

ğŸŒ Testing Cities List...
âœ… PASS: Cities List (All)
   Details: Found 8 cities
âœ… PASS: Cities List (Filtered by Country)
   Details: Found 1 cities in US
âœ… PASS: Cities List (Major Cities Only)
   Details: Found 8 major cities

ğŸŒ Testing Cities in Radius...
âœ… PASS: Cities in Radius
   Details: Found 1 cities within 100km radius

ğŸŒ Testing Seller Visibility Creation...
âœ… PASS: Seller Visibility Creation (Local)
   Details: Local visibility created: visibility_ec32dbe8-1012-4192-9e88-a40a004f1f47
âœ… PASS: Seller Visibility Creation (National)
   Details: National visibility created successfully
âœ… PASS: Seller Visibility Creation (Global Strategic)
   Details: Global strategic visibility created successfully
âœ… PASS: Seller Visibility Creation (Global All)
   Details: Global all visibility created successfully

ğŸŒ Testing Seller Visibility Retrieval...
âœ… PASS: Seller Visibility Retrieval
   Details: Retrieved visibility settings for vendor ec32dbe8-1012-4192-9e88-a40a004f1f47

ğŸŒ Testing AI Market Analysis...
âœ… PASS: AI Market Analysis
   Details: Market analysis completed - Opportunity Score: 50, Insights: 0

ğŸŒ Testing AI Targeting Recommendations...
âŒ FAIL: AI Targeting Recommendations
   Details: HTTP 500: {'detail': 'Error getting recommendations: 403: Access denied'}

ğŸŒ Testing Performance Tracking...
âœ… PASS: Performance Tracking (View)
   Details: View event tracked successfully
âœ… PASS: Performance Tracking (Click)
   Details: Click event tracked successfully
âœ… PASS: Performance Tracking (Conversion)
   Details: Conversion event with revenue tracked successfully

ğŸŒ Testing Vendor Analytics...
âŒ FAIL: Vendor Analytics
   Details: HTTP 500: {'detail': 'Analytics error: 403: Access denied'}

ğŸŒ Testing Geographic Product Filtering...
âœ… PASS: Geographic Product Filtering
   Details: Found 2 products with geographic filtering applied

ğŸŒ Testing Seller Geographic Insights...
âŒ FAIL: Seller Geographic Insights
   Details: HTTP 500: {'detail': 'Insights error: 403: Access denied'}

ğŸŒ Testing Geographic Authentication Controls...
âœ… PASS: Geographic Auth Control (No Token)
   Details: Correctly rejected request without authentication
âœ… PASS: Geographic Auth Control (Valid Token)
   Details: Authentication working correctly for vendor endpoints

ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ” AI SEARCH HUB TESTING ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”

ğŸ” Testing AI Search Hub Health Check...
âœ… PASS: AI Search Hub Health Check
   Details: Services: 4, Tools: 6

ğŸ” Testing Quick Search (Anonymous)...
âœ… PASS: Quick Search (Hazelnuts)
   Details: Found 1 results in 0ms
âœ… PASS: Quick Search (Cotton T-shirts with filters)
   Details: Found 1 results with filters: {'price_max': 5.0}
âœ… PASS: Quick Search (Bamboo Towels)
   Details: Found 1 eco-friendly products

ğŸ” Testing Quick Search (Authenticated)...
âœ… PASS: Quick Search (Turkish Coffee - Authenticated)
   Details: Found 3 Turkish products

ğŸ” Testing Deep Search (Market Analysis)...
âœ… PASS: Deep Search (Bamboo Towels Market)
   Details: Generated 4 insights with 0.85 confidence, 3 sources
âœ… PASS: Deep Search (Turkish Hazelnut Trends)
   Details: Market analysis completed with 3 insights

ğŸ” Testing Image Read (OCR)...
âœ… PASS: Image Read (OCR)
   Details: Extracted 6 text blocks, 4 entities
âœ… PASS: Image Read (OCR + Translation)
   Details: Translation included

ğŸ” Testing QR Code Scanning...
âœ… PASS: QR Code Scanning (Product)
   Details: Intent: product_lookup, Action: Open product page for Organic Turkish Hazelnuts
âœ… PASS: QR Code Scanning (Contact)
   Details: Detected intent: contact

ğŸ” Testing Barcode Scanning...
âœ… PASS: Barcode Scanning (EAN13)
   Details: Value: 8690123456789, Type: EAN13, Key: turkish_product_001
âœ… PASS: Barcode Scanning (UPC)
   Details: Detected symbology: UPC
âœ… PASS: Barcode Scanning (CODE128)
   Details: CODE128 barcode processed successfully

ğŸ” Testing Voice Input Processing...
âœ… PASS: Voice Input (English)
   Details: Transcript: 'Find vegan leather manufacturers near Istanbul...', Language: en, Confidence: 0.92
âœ… PASS: Voice Input (Turkish)
   Details: Language: tr, Confidence: 0.92
âœ… PASS: Voice Input (Arabic)
   Details: Arabic processing completed with confidence: 0.92

ğŸ” Testing Intent Analysis...
âœ… PASS: Intent Analysis (Product Search)
   Details: Intent: buyer_find_products, Tool: quick_search, Confidence: 0.85
âœ… PASS: Intent Analysis (QR Scan)
   Details: Suggested tool: qr_scan
âœ… PASS: Intent Analysis (Image Reading)
   Details: Action: Use image_read to process this query

ğŸ” Testing User Preferences (Anonymous)...
âœ… PASS: User Preferences (Anonymous GET)
   Details: Correctly rejected unauthenticated request
âœ… PASS: User Preferences (Anonymous POST)
   Details: Correctly rejected unauthenticated request

ğŸ” Testing User Preferences (Authenticated)...
âœ… PASS: User Preferences (GET Default)
   Details: Tools: ['quick_search', 'deep_search', 'image_read'], Currency: EUR, Privacy settings: 4 items
âœ… PASS: User Preferences (UPDATE)
   Details: Preferences updated successfully
âœ… PASS: User Preferences (GET Updated)
   Details: Updated preferences retrieved correctly

ğŸ” Testing Search Analytics (User)...
âœ… PASS: Search Analytics (User)
   Details: Total searches: 15, Success rate: 1.0, Tools used: 1, Recent: 10
âœ… PASS: Search Analytics (30 days)
   Details: Analytics for 30 days retrieved

ğŸ” Testing Search Hub Edge Cases...
âœ… PASS: Quick Search (Empty Query)
   Details: Handled empty query, returned 0 results
âœ… PASS: Deep Search (Malformed Request)
   Details: Handled malformed request appropriately
âœ… PASS: Image Read (Invalid Base64)
   Details: Handled invalid image data gracefully
âœ… PASS: Intent Analysis (Long Query)
   Details: Handled very long query successfully

ğŸ” Testing Search Hub Multi-Language Support...
âœ… PASS: Quick Search (Turkish)
   Details: Turkish search returned 3 results
âœ… PASS: Quick Search (Arabic)
   Details: Arabic search processed, 1 results
âœ… PASS: Deep Search (German)
   Details: German market analysis generated 3 insights

ğŸ’³ğŸ’³ğŸ’³ğŸ’³ğŸ’³ğŸ’³ğŸ’³ğŸ’³ğŸ’³ğŸ’³ğŸ’³ğŸ’³ğŸ’³ğŸ’³ğŸ’³ GLOBAL PAYMENTS & TAX ENGINE TESTING ğŸ’³ğŸ’³ğŸ’³ğŸ’³ğŸ’³ğŸ’³ğŸ’³ğŸ’³ğŸ’³ğŸ’³ğŸ’³ğŸ’³ğŸ’³ğŸ’³ğŸ’³

ğŸ’³ Testing Payments & Tax Data Initialization...
âœ… PASS: Payments & Tax Data Initialization
   Details: Global payment methods, tax rules, and currencies initialized successfully

ğŸ’³ Testing Payment Method Suggestions...
âœ… PASS: Payment Method Suggestions (US B2C)
   Details: Found 3 payment methods with AI insights
âœ… PASS: Payment Method Suggestions (TR High-Value)
   Details: Found 1 payment methods for Turkey
âœ… PASS: Payment Method Suggestions (DE B2B)
   Details: Found 1 payment methods for German B2B

ğŸ’³ Testing Tax Computation Engine...
âœ… PASS: Tax Computation (US B2C)
   Details: Tax calculated: $16.5, 2 tax lines
âœ… PASS: Tax Computation (UK B2B Reverse Charge)
   Details: B2B tax calculated: Â£0.0 (should be 0 for reverse charge)
âœ… PASS: Tax Computation (TR VAT)
   Details: Turkey VAT calculated: â‚º200.0

ğŸ’³ Testing Currency Conversion...
âœ… PASS: Currency Conversion (USD to EUR)
   Details: $100 = â‚¬108.0 (rate: 1.08)
âœ… PASS: Currency Conversion (Same Currency)
   Details: Same currency conversion handled correctly

ğŸ’³ Testing Fraud Risk Assessment...
âœ… PASS: Fraud Risk Assessment (Low Risk)
   Details: Risk: 10/100 (low) - Action: allow
âœ… PASS: Fraud Risk Assessment (High Risk)
   Details: Risk: 100/100 (very_high) - Action: block

ğŸ’³ Testing Enhanced Payment Intent...
âœ… PASS: Enhanced Payment Intent
   Details: Subtotal: â‚¬1300.0, Total: â‚¬1547.0, Methods: 2, Risk: high

ğŸ’³ Testing Payment Analytics (Admin)...
âŒ FAIL: Payment Analytics (Admin)
   Details: Could not login as admin

ğŸ’³ Testing Tax Analytics (Admin)...
âŒ FAIL: Tax Analytics (Admin)
   Details: Could not login as admin

ğŸ’³ Testing Payments & Tax Health Check...
âœ… PASS: Payments & Tax Health Check
   Details: Service healthy - Methods: 5, Tax Rules: 5, Currencies: 5

ğŸ’³ Testing Payment Methods Listing...
âœ… PASS: Payment Methods Listing (All)
   Details: Found 5 payment methods
âœ… PASS: Payment Methods Listing (Filtered)
   Details: Found 3 methods for US/USD

ğŸ’³ Testing Tax Rules Listing...
âœ… PASS: Tax Rules Listing (All)
   Details: Found 5 tax rules
âœ… PASS: Tax Rules Listing (Filtered)
   Details: Found 1 VAT rules for GB

ğŸ’³ Testing Currencies Listing...
âœ… PASS: Currencies Listing
   Details: Found 5 supported currencies

ğŸ’³ Testing Payments & Tax Error Scenarios...
âœ… PASS: Invalid Country Code
   Details: Handled invalid country gracefully - 0 methods
âœ… PASS: Invalid Currency Conversion
   Details: Invalid currency properly rejected
âœ… PASS: Fraud Assessment Without Auth
   Details: Properly requires authentication

ğŸ¢ğŸ¢ğŸ¢ğŸ¢ğŸ¢ğŸ¢ğŸ¢ğŸ¢ğŸ¢ğŸ¢ğŸ¢ğŸ¢ğŸ¢ğŸ¢ğŸ¢ ENTERPRISE FEATURES TESTING ğŸ¢ğŸ¢ğŸ¢ğŸ¢ğŸ¢ğŸ¢ğŸ¢ğŸ¢ğŸ¢ğŸ¢ğŸ¢ğŸ¢ğŸ¢ğŸ¢ğŸ¢

ğŸŒ AI Trade Intelligence Testing...

ğŸŒ Testing Trade Intelligence Health Check...
âœ… PASS: Trade Intelligence Health Check
   Details: Capabilities: 7, Domains: 8

ğŸŒ Testing HS Code Suggestion...
âŒ FAIL: HS Code Suggestion
   Details: {'candidates': [{'hs': '8517.12', 'desc': 'Telephones for cellular networks', 'confidence': 0.95}], 'notes': ['AI-enhanced classification analysis', '### HS Code Classification Analysis for Wireless Bluetooth Headphones\n\n#### Current Suggestion Validation\n**Current Suggested HS Code**: \n- **8517.12** - "Telephones for cellular networks"\n- **Confide...', 'Estimates only - confirm with customs broker for binding classification']}

ğŸŒ Testing Landed Cost Calculation...
âœ… PASS: Landed Cost Calculation
   Details: Total cost: $1135.0, Components: 0

ğŸŒ Testing Freight Quote...
âŒ FAIL: Freight Quote
   Details: {'options': [{'carrier': 'Turkish Airlines Cargo', 'eta_days': 4, 'cost': 48.0, 'notes': 'Standard air freight, good reliability | AI Insight: ### Freight Shipping Scenario Analysis\n\n#### Summa...'}, {'carrier': 'Lufthansa Cargo', 'eta_days': 5, 'cost': 45.599999999999994, 'notes': 'Reliable European network'}], 'volumetric_weight_kg': 9.0}

ğŸŒ Testing Compliance Screening...
âŒ FAIL: Compliance Screening
   Details: {'hits': [], 'notes': ['AI Risk Analysis: ### Compliance Screening Analysis for International Trade\n\n#### Summary of Screening Results\n- **Par...', 'This is a simplified screening - use professional compliance services for actual transactions']}

ğŸŒ Testing Trade Payment Methods Suggestion...
âœ… PASS: Trade Payment Methods Suggestion
   Details: Found 1 methods with AI insights

ğŸŒ Testing Trade Tax Computation...
âœ… PASS: Trade Tax Computation
   Details: Tax: $26.249125, Lines: 0

ğŸŒ Testing Trade Insights...
âœ… PASS: Trade Insights
   Details: AI insights provided with 0.85 confidence

ğŸŒ Testing Trade Reference Data...
âœ… PASS: Trade Incoterms Reference
   Details: Found 11 Incoterms
âœ… PASS: Trade Transport Modes Reference
   Details: Found 7 transport modes
âœ… PASS: Trade Sample HS Codes Reference
   Details: Found 15 sample HS codes

ğŸ” Auth Identity & Verification Testing...

ğŸ” Testing Identity Service Health Check...
âœ… PASS: Identity Service Health Check
   Details: Capabilities: 6, Levels: 3

ğŸ” Testing User Identity Creation...
âœ… PASS: User Identity Creation
   Details: Created identity for user: 50009728-eeb3-4b0a-a6d5-40ad694c0607

ğŸ” Testing Identity Verification Requirements...
âŒ FAIL: Identity Verification Requirements
   Details: {'error': 'User not found'}

ğŸ” Testing Username Validation...
âŒ FAIL: Username Validation
   Details: {'valid': False, 'error': 'User not found'}

ğŸ” Testing Avatar Validation...
âŒ FAIL: Avatar Validation
   Details: {'valid': False, 'error': 'User not found'}

ğŸ” Testing Identity Policies...
âœ… PASS: Username Policy
   Details: Policy retrieved with 7 rules
âœ… PASS: Avatar Policy
   Details: Policy retrieved with 8 rules

ğŸ” Testing Verification Levels...
âœ… PASS: Verification Levels
   Details: Levels: 3, Role configs: 4

ğŸ¤– AI User Agents Framework Testing...

ğŸ¤– Testing AI Agents Health Check...
âœ… PASS: AI Agents Health Check
   Details: Capabilities: 6, Roles: 2, Tasks: 7

ğŸ¤– Testing Agent Configuration Creation...
âŒ FAIL: Agent Configuration Creation
   Details: HTTP 422: {'detail': [{'type': 'enum', 'loc': ['body', 'priority_rules', 0], 'msg': "Input should be 'speed', 'cost', 'sustainability' or 'reliability'", 'input': 'budget_first', 'ctx': {'expected': "'speed', 'cost', 'sustainability' or 'reliability'"}, 'url': 'https://errors.pydantic.dev/2.11/v/enum'}, {'type': 'enum', 'loc': ['body', 'priority_rules', 1], 'msg': "Input should be 'speed', 'cost', 'sustainability' or 'reliability'", 'input': 'quality_second', 'ctx': {'expected': "'speed', 'cost', 'sustainability' or 'reliability'"}, 'url': 'https://errors.pydantic.dev/2.11/v/enum'}, {'type': 'enum', 'loc': ['body', 'agent_style'], 'msg': "Input should be 'formal', 'concise', 'friendly' or 'data_driven'", 'input': 'balanced', 'ctx': {'expected': "'formal', 'concise', 'friendly' or 'data_driven'"}, 'url': 'https://errors.pydantic.dev/2.11/v/enum'}]}

ğŸ¤– Testing Get Agent Configuration...
âœ… PASS: Get Agent Configuration
   Details: Role: buyer_agent, Tasks: 3

ğŸ¤– Testing Agent Task Creation...
âœ… PASS: Agent Task Creation
   Details: Created task: 80237841-931a-4976-ab82-387a1f7b46cd

ğŸ¤– Testing Get Agent Tasks...
âœ… PASS: Get Agent Tasks
   Details: Found 6 tasks

ğŸ¤– Testing Agent Capabilities...
âœ… PASS: Agent Capabilities
   Details: Capabilities: 2, Templates: 4, Roles: 2

ğŸ¤– Testing Agent Analytics...
âŒ FAIL: Agent Analytics
   Details: {'period_days': 30, 'total_tasks': 6, 'completed_tasks': 0, 'success_rate': 0.0, 'task_types': [{'task_type': 'shopping', 'count': 4}, {'task_type': 'shopping.discover_products', 'count': 2}], 'cost_saved_estimate': 0.0, 'time_saved_hours': 0.0}

ğŸ‘¤ Profile Card System Testing...

ğŸ‘¤ Testing Profile Cards Health Check...
âœ… PASS: Profile Cards Health Check
   Details: Capabilities: 8, Types: 3, Social: 10

ğŸ‘¤ Testing Profile Card Creation...
âœ… PASS: Profile Card Creation
   Details: Created card: 6ec621ed-ed0f-4f44-99f7-757274ca9ff4

ğŸ‘¤ Testing Get My Profile Card...
âœ… PASS: Get My Profile Card
   Details: Card: Test Profile User (@testprofileuser)

ğŸ‘¤ Testing Profile Completeness...
âŒ FAIL: Profile Completeness
   Details: {'percentage': 62.5, 'completed_fields': 5, 'total_fields': 8, 'missing_fields': ['avatar_url', 'verification_badges', 'social_links'], 'suggestions': ['Add a profile photo to help others recognize you', 'Complete verification to earn trust badges', 'Connect your social media accounts to expand your presence'], 'ai_suggestions': "Error getting AI suggestions: 'str' object has no attribute 'value'"}

ğŸ‘¤ Testing Profile Search...
âœ… PASS: Profile Search
   Details: Found 0 profiles matching 'test'

ğŸ‘¤ Testing Profile Reference Data...
âœ… PASS: Profile Social Platforms
   Details: Found 10 social platforms
âœ… PASS: Profile Contact Methods
   Details: Found 5 contact methods
âœ… PASS: Profile Templates
   Details: Found 3 templates

ğŸ“‹ğŸ“‹ğŸ“‹ğŸ“‹ğŸ“‹ğŸ“‹ğŸ“‹ğŸ“‹ğŸ“‹ğŸ“‹ğŸ“‹ğŸ“‹ğŸ“‹ğŸ“‹ğŸ“‹ DOCUMENTATION SUITE TESTING ğŸ“‹ğŸ“‹ğŸ“‹ğŸ“‹ğŸ“‹ğŸ“‹ğŸ“‹ğŸ“‹ğŸ“‹ğŸ“‹ğŸ“‹ğŸ“‹ğŸ“‹ğŸ“‹ğŸ“‹

ğŸ“„ Documentation Compliance Testing...

ğŸ“„ Testing Documentation Compliance Health Check...
âŒ FAIL: Documentation Compliance Health Check
   Details: HTTP 404: {'detail': 'Document not found'}

ğŸ“„ Testing Document Creation...
âœ… PASS: Document Creation
   Details: Created document: f5a2af4a-3eab-47b8-a8ac-81efd6963e79

ğŸ“„ Testing List User Documents...
âŒ FAIL: List User Documents
   Details: HTTP 500: Internal Server Error

ğŸ“„ Testing Get Document...
âœ… PASS: Get Document
   Details: Retrieved commercial_invoice: Test Commercial Invoice

ğŸ“„ Testing Submit Document...
âœ… PASS: Submit Document
   Details: Document submitted: Document submitted successfully

ğŸ“„ Testing Amend Document...
âœ… PASS: Amend Document
   Details: Amendment created: c2a4830e-7fd1-4cd1-aeaf-493431b3dd4a

ğŸ“„ Testing AI Generate Document...
âœ… PASS: AI Generate Document
   Details: AI generated document with 5 fields

ğŸ“„ Testing Document Templates...
âœ… PASS: Document Templates
   Details: Found 3 templates

ğŸ“„ Testing Compliance Standards...
âœ… PASS: Compliance Standards
   Details: Compliance standards retrieved

ğŸ“„ Testing Document Types...
âŒ FAIL: Document Types
   Details: HTTP 404: {'detail': 'Document not found'}

ğŸ‘¥ Procedures by Category Testing...

ğŸ‘¥ Testing Procedures by Category Health Check...
âœ… PASS: Procedures by Category Health Check
   Details: Capabilities: 6, Categories: 2, Steps: 11, Permissions: 12, Badges: 3

ğŸ‘¥ Testing Create User Procedure...
âœ… PASS: Create User Procedure
   Details: Procedure existing: f84917a3-2b7e-4f7a-a87c-52b7723dd7e5, Role: None

ğŸ‘¥ Testing Get My Procedure...
âŒ FAIL: Get My Procedure
   Details: {'_id': 'f84917a3-2b7e-4f7a-a87c-52b7723dd7e5', 'user_id': '14d33012-07ee-4ac1-9069-4a9a8807738c', 'category': 'seller_brand', 'current_step': 'create_account', 'completed_steps': [], 'verification_status': {}, 'badge_earned': 'none', 'permissions_granted': [], 'created_at': '2025-09-14T00:25:03.164000', 'updated_at': '2025-09-15T15:31:26.384000', 'onboarding_completed_at': None, 'next_reverification_due': '2026-09-15T15:31:26.384000', 'status': 'under_review', 'notes': None, 'assigned_reviewer': None, 'step_history': [{'step': 'create_account', 'action': 'started', 'timestamp': '2025-09-14T00:25:03.164000', 'user_id': '14d33012-07ee-4ac1-9069-4a9a8807738c', 'details': {'role': 'seller_brand'}}], 'verification_history': [{'timestamp': '2025-09-14T00:25:03.369000', 'action': 'reverification_requested', 'user_id': '14d33012-07ee-4ac1-9069-4a9a8807738c', 'reason': 'periodic_reverification'}, {'timestamp': '2025-09-15T15:31:26.384000', 'action': 'reverification_requested', 'user_id': '14d33012-07ee-4ac1-9069-4a9a8807738c', 'reason': 'periodic_reverification'}]}

ğŸ‘¥ Testing Onboarding Progress...
âŒ FAIL: Onboarding Progress
   Details: HTTP 404: {'detail': "'str' object has no attribute 'value'"}

ğŸ‘¥ Testing Complete Onboarding Step...
âŒ FAIL: Complete Onboarding Step
   Details: HTTP 422: {'detail': [{'type': 'enum', 'loc': ['body', 'step'], 'msg': "Input should be 'create_account', 'email_phone_verify', 'enable_2fa', 'business_profile_setup', 'kyb_submission', 'bank_account_verification', 'tax_ids_submission', 'brand_assets_upload', 'policy_acceptance', 'profile_basics' or 'payment_method_verification'", 'input': 'company_verification', 'ctx': {'expected': "'create_account', 'email_phone_verify', 'enable_2fa', 'business_profile_setup', 'kyb_submission', 'bank_account_verification', 'tax_ids_submission', 'brand_assets_upload', 'policy_acceptance', 'profile_basics' or 'payment_method_verification'"}, 'url': 'https://errors.pydantic.dev/2.11/v/enum'}]}

ğŸ‘¥ Testing User Permissions...
âœ… PASS: User Permissions
   Details: Found 0 permissions

ğŸ‘¥ Testing Check User Permission...
âŒ FAIL: Check User Permission
   Details: HTTP 422: {'detail': [{'type': 'enum', 'loc': ['path', 'permission'], 'msg': "Input should be 'list_products', 'b2b_trading', 'cross_border', 'payments_accept', 'payouts_receive', 'api_access', 'city_targeting', 'browse_buy', 'wishlist', 'reviews', 'returns_support' or 'seller_tools'", 'input': 'create_products', 'ctx': {'expected': "'list_products', 'b2b_trading', 'cross_border', 'payments_accept', 'payouts_receive', 'api_access', 'city_targeting', 'browse_buy', 'wishlist', 'reviews', 'returns_support' or 'seller_tools'"}, 'url': 'https://errors.pydantic.dev/2.11/v/enum'}]}

ğŸ‘¥ Testing User Badge...
âŒ FAIL: User Badge
   Details: {'badge': 'none', 'verified': False}

ğŸ‘¥ Testing Request Reverification...
âœ… PASS: Request Reverification
   Details: Reverification requested: Reverification process started

ğŸ‘¥ Testing Generate Onboarding Guidance...
âŒ FAIL: Generate Onboarding Guidance
   Details: HTTP 404: {'detail': "'str' object has no attribute 'value'"}

ğŸ‘¥ Testing User Analytics...
âŒ FAIL: User Analytics
   Details: HTTP 404: {'detail': "'str' object has no attribute 'value'"}

ğŸ‘¥ Testing Category Configurations...
âœ… PASS: Category Configurations
   Details: Category configurations retrieved

ğŸ‘¥ Testing Procedures Reference Data...
âœ… PASS: Procedures Reference Data
   Details: Roles: 4, Steps: 11, Permissions: 12, Badges: 3

ğŸ”„ Documentation Procedures Testing...

ğŸ”„ Testing Documentation Procedures Health Check...
âŒ FAIL: Documentation Procedures Health Check
   Details: HTTP 404: {'detail': 'Procedure not found'}

ğŸ”„ Testing Create Document Procedure...
âœ… PASS: Create Document Procedure
   Details: Procedure created: 53477db9-983b-4320-8388-178cf988d668

ğŸ”„ Testing Get Document Procedure...
âŒ FAIL: Get Document Procedure
   Details: {'_id': '53477db9-983b-4320-8388-178cf988d668', 'document_id': 'f5a2af4a-3eab-47b8-a8ac-81efd6963e79', 'document_type': 'commercial_invoice', 'document_title': 'Test Invoice for Procedure', 'current_state': 'draft', 'approval_level_required': 'auto', 'priority': 'low', 'created_by': '14d33012-07ee-4ac1-9069-4a9a8807738c', 'current_assignee': None, 'reviewer_pool': ['reviewer_1', 'reviewer_2'], 'created_at': '2025-09-15T20:27:49.094000', 'updated_at': '2025-09-15T20:27:49.094000', 'submitted_at': None, 'assigned_at': None, 'due_date': '2025-09-15T21:27:49.094000', 'completed_at': None, 'sla_config': {'level': 'auto', 'response_time_hours': 0, 'completion_time_hours': 1, 'escalation_time_hours': 2, 'business_hours_only': True, 'excluded_days': ['Saturday', 'Sunday']}, 'sla_met': None, 'response_time_minutes': None, 'completion_time_minutes': None, 'state_history': [{'state': 'draft', 'timestamp': '2025-09-15T20:27:49.094000', 'user_id': '14d33012-07ee-4ac1-9069-4a9a8807738c', 'action': 'created', 'details': {'approval_level': 'auto', 'risk_score': 0.0}}], 'approvals': [], 'comments': [], 'escalations': [], 'notification_rules': [{'rule_id': 'dd02d56b-752a-4871-a928-d0d66297990f', 'event_type': 'review_required', 'recipients': ['current_assignee'], 'notification_types': ['email', 'in_app'], 'delay_minutes': 0, 'conditions': {'state': 'pending_review'}}, {'rule_id': '29024b09-7fe8-4142-9958-dac4079d225b', 'event_type': 'sla_warning', 'recipients': ['current_assignee', 'supervisor'], 'notification_types': ['email'], 'delay_minutes': 60, 'conditions': {'state': 'in_review'}}], 'notifications_sent': [], 'risk_score': 0.0, 'compliance_flags': [], 'regulatory_requirements': [], 'tags': [], 'custom_fields': {}, 'external_references': [], 'audit_log': [{'timestamp': '2025-09-15T20:27:49.094000', 'action': 'procedure_created', 'user_id': '14d33012-07ee-4ac1-9069-4a9a8807738c', 'details': {'document_id': 'f5a2af4a-3eab-47b8-a8ac-81efd6963e79', 'approval_level': 'auto', 'risk_score': 0.0}}]}

ğŸ”„ Testing Submit for Review...
âœ… PASS: Submit for Review
   Details: New state: pending_review, 

ğŸ”„ Testing Approve Document...
âœ… PASS: Approve Document
   Details: Approved at level: None, New state: approved

ğŸ”„ Testing Reject Document...
âŒ FAIL: Reject Document
   Details: HTTP 422: {'detail': [{'type': 'enum', 'loc': ['body', 'reviewer_role'], 'msg': "Input should be 'compliance_officer', 'senior_compliance', 'legal_counsel', 'operations_manager', 'trade_specialist', 'customs_expert' or 'tax_advisor'", 'input': 'quality_control', 'ctx': {'expected': "'compliance_officer', 'senior_compliance', 'legal_counsel', 'operations_manager', 'trade_specialist', 'customs_expert' or 'tax_advisor'"}, 'url': 'https://errors.pydantic.dev/2.11/v/enum'}]}

ğŸ”„ Testing Request Revision...
âœ… PASS: Request Revision
   Details: Revision requested: None, New state: revision_requested

ğŸ”„ Testing Add Comment...
âœ… PASS: Add Comment
   Details: Comment added: c6576b24-3399-4c43-ae7e-84b88fc2b736

ğŸ”„ Testing Escalate Procedure...
âŒ FAIL: Escalate Procedure
   Details: HTTP 400: {'detail': "'sla_breach' is not a valid EscalationTrigger"}

ğŸ”„ Testing Get My Procedures...
âŒ FAIL: Get My Procedures
   Details: HTTP 404: {'detail': 'Procedure not found'}

ğŸ”„ Testing Get Pending Reviews...
âŒ FAIL: Get Pending Reviews
   Details: HTTP 404: {'detail': 'Procedure not found'}

ğŸ”„ Testing Generate Workflow Insights...
