{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":51,"index":51}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"]}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":52},"end":{"line":2,"column":69,"index":121}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"]}},{"name":"./PermissionsOnboarding","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":122},"end":{"line":3,"column":60,"index":182}}],"key":"6oNt/AlnSN+gKfExTdyP8okYaS8=","exportNames":["*"]}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = PermissionsManager;\n  var _react = _interopRequireWildcard(require(_dependencyMap[1], \"react\"));\n  var _asyncStorage = _interopRequireDefault(require(_dependencyMap[2], \"@react-native-async-storage/async-storage\"));\n  var _PermissionsOnboarding = _interopRequireDefault(require(_dependencyMap[3], \"./PermissionsOnboarding\"));\n  var _jsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  var _jsxFileName = \"/app/frontend/src/components/PermissionsManager.tsx\";\n  function _interopRequireWildcard(e, t) { if (\"function\" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) \"default\" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }\n  function PermissionsManager({\n    children\n  }) {\n    const [showOnboarding, setShowOnboarding] = (0, _react.useState)(false);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkOnboardingStatus();\n    }, []);\n    const checkOnboardingStatus = async () => {\n      try {\n        const hasCompletedOnboarding = await _asyncStorage.default.getItem('permissions_onboarding_completed');\n        console.log('Permissions onboarding check:', hasCompletedOnboarding);\n        if (!hasCompletedOnboarding) {\n          // Show onboarding for first-time users\n          console.log('Showing permissions onboarding for first-time user');\n          setShowOnboarding(true);\n        } else {\n          console.log('Permissions onboarding already completed');\n        }\n      } catch (error) {\n        console.error('Error checking onboarding status:', error);\n        // Show onboarding on error to be safe\n        console.log('Showing permissions onboarding due to error');\n        setShowOnboarding(true);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const handleOnboardingComplete = async permissions => {\n      console.log('Permissions granted:', permissions);\n\n      // Track permissions for analytics\n      try {\n        await _asyncStorage.default.setItem('initial_permissions', JSON.stringify(permissions));\n        await _asyncStorage.default.setItem('permissions_onboarding_completed', 'true');\n      } catch (error) {\n        console.error('Error saving permissions status:', error);\n      }\n      setShowOnboarding(false);\n    };\n    const handleOnboardingSkip = async () => {\n      console.log('User skipped permissions onboarding');\n      try {\n        await _asyncStorage.default.setItem('permissions_onboarding_completed', 'true');\n        await _asyncStorage.default.setItem('permissions_skipped', 'true');\n      } catch (error) {\n        console.error('Error saving skip status:', error);\n      }\n      setShowOnboarding(false);\n    };\n    if (isLoading) {\n      // Show loading state while checking onboarding status\n      return null; // Or a loading component\n    }\n    return /*#__PURE__*/(0, _jsxDevRuntime.jsxDEV)(_jsxDevRuntime.Fragment, {\n      children: [children, /*#__PURE__*/(0, _jsxDevRuntime.jsxDEV)(_PermissionsOnboarding.default, {\n        visible: showOnboarding,\n        onComplete: handleOnboardingComplete,\n        onSkip: handleOnboardingSkip\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true);\n  }\n});","lineCount":79,"map":[[7,2,1,0],[7,6,1,0,"_react"],[7,12,1,0],[7,15,1,0,"_interopRequireWildcard"],[7,38,1,0],[7,39,1,0,"require"],[7,46,1,0],[7,47,1,0,"_dependencyMap"],[7,61,1,0],[8,2,2,0],[8,6,2,0,"_asyncStorage"],[8,19,2,0],[8,22,2,0,"_interopRequireDefault"],[8,44,2,0],[8,45,2,0,"require"],[8,52,2,0],[8,53,2,0,"_dependencyMap"],[8,67,2,0],[9,2,3,0],[9,6,3,0,"_PermissionsOnboarding"],[9,28,3,0],[9,31,3,0,"_interopRequireDefault"],[9,53,3,0],[9,54,3,0,"require"],[9,61,3,0],[9,62,3,0,"_dependencyMap"],[9,76,3,0],[10,2,3,60],[10,6,3,60,"_jsxDevRuntime"],[10,20,3,60],[10,23,3,60,"require"],[10,30,3,60],[10,31,3,60,"_dependencyMap"],[10,45,3,60],[11,2,3,60],[11,6,3,60,"_jsxFileName"],[11,18,3,60],[12,2,3,60],[12,11,3,60,"_interopRequireWildcard"],[12,35,3,60,"e"],[12,36,3,60],[12,38,3,60,"t"],[12,39,3,60],[12,68,3,60,"WeakMap"],[12,75,3,60],[12,81,3,60,"r"],[12,82,3,60],[12,89,3,60,"WeakMap"],[12,96,3,60],[12,100,3,60,"n"],[12,101,3,60],[12,108,3,60,"WeakMap"],[12,115,3,60],[12,127,3,60,"_interopRequireWildcard"],[12,150,3,60],[12,162,3,60,"_interopRequireWildcard"],[12,163,3,60,"e"],[12,164,3,60],[12,166,3,60,"t"],[12,167,3,60],[12,176,3,60,"t"],[12,177,3,60],[12,181,3,60,"e"],[12,182,3,60],[12,186,3,60,"e"],[12,187,3,60],[12,188,3,60,"__esModule"],[12,198,3,60],[12,207,3,60,"e"],[12,208,3,60],[12,214,3,60,"o"],[12,215,3,60],[12,217,3,60,"i"],[12,218,3,60],[12,220,3,60,"f"],[12,221,3,60],[12,226,3,60,"__proto__"],[12,235,3,60],[12,243,3,60,"default"],[12,250,3,60],[12,252,3,60,"e"],[12,253,3,60],[12,270,3,60,"e"],[12,271,3,60],[12,294,3,60,"e"],[12,295,3,60],[12,320,3,60,"e"],[12,321,3,60],[12,330,3,60,"f"],[12,331,3,60],[12,337,3,60,"o"],[12,338,3,60],[12,341,3,60,"t"],[12,342,3,60],[12,345,3,60,"n"],[12,346,3,60],[12,349,3,60,"r"],[12,350,3,60],[12,358,3,60,"o"],[12,359,3,60],[12,360,3,60,"has"],[12,363,3,60],[12,364,3,60,"e"],[12,365,3,60],[12,375,3,60,"o"],[12,376,3,60],[12,377,3,60,"get"],[12,380,3,60],[12,381,3,60,"e"],[12,382,3,60],[12,385,3,60,"o"],[12,386,3,60],[12,387,3,60,"set"],[12,390,3,60],[12,391,3,60,"e"],[12,392,3,60],[12,394,3,60,"f"],[12,395,3,60],[12,411,3,60,"t"],[12,412,3,60],[12,416,3,60,"e"],[12,417,3,60],[12,433,3,60,"t"],[12,434,3,60],[12,441,3,60,"hasOwnProperty"],[12,455,3,60],[12,456,3,60,"call"],[12,460,3,60],[12,461,3,60,"e"],[12,462,3,60],[12,464,3,60,"t"],[12,465,3,60],[12,472,3,60,"i"],[12,473,3,60],[12,477,3,60,"o"],[12,478,3,60],[12,481,3,60,"Object"],[12,487,3,60],[12,488,3,60,"defineProperty"],[12,502,3,60],[12,507,3,60,"Object"],[12,513,3,60],[12,514,3,60,"getOwnPropertyDescriptor"],[12,538,3,60],[12,539,3,60,"e"],[12,540,3,60],[12,542,3,60,"t"],[12,543,3,60],[12,550,3,60,"i"],[12,551,3,60],[12,552,3,60,"get"],[12,555,3,60],[12,559,3,60,"i"],[12,560,3,60],[12,561,3,60,"set"],[12,564,3,60],[12,568,3,60,"o"],[12,569,3,60],[12,570,3,60,"f"],[12,571,3,60],[12,573,3,60,"t"],[12,574,3,60],[12,576,3,60,"i"],[12,577,3,60],[12,581,3,60,"f"],[12,582,3,60],[12,583,3,60,"t"],[12,584,3,60],[12,588,3,60,"e"],[12,589,3,60],[12,590,3,60,"t"],[12,591,3,60],[12,602,3,60,"f"],[12,603,3,60],[12,608,3,60,"e"],[12,609,3,60],[12,611,3,60,"t"],[12,612,3,60],[13,2,9,15],[13,11,9,24,"PermissionsManager"],[13,29,9,42,"PermissionsManager"],[13,30,9,43],[14,4,9,45,"children"],[15,2,9,79],[15,3,9,80],[15,5,9,82],[16,4,10,2],[16,10,10,8],[16,11,10,9,"showOnboarding"],[16,25,10,23],[16,27,10,25,"setShowOnboarding"],[16,44,10,42],[16,45,10,43],[16,48,10,46],[16,52,10,46,"useState"],[16,67,10,54],[16,69,10,55],[16,74,10,60],[16,75,10,61],[17,4,11,2],[17,10,11,8],[17,11,11,9,"isLoading"],[17,20,11,18],[17,22,11,20,"setIsLoading"],[17,34,11,32],[17,35,11,33],[17,38,11,36],[17,42,11,36,"useState"],[17,57,11,44],[17,59,11,45],[17,63,11,49],[17,64,11,50],[18,4,13,2],[18,8,13,2,"useEffect"],[18,24,13,11],[18,26,13,12],[18,32,13,18],[19,6,14,4,"checkOnboardingStatus"],[19,27,14,25],[19,28,14,26],[19,29,14,27],[20,4,15,2],[20,5,15,3],[20,7,15,5],[20,9,15,7],[20,10,15,8],[21,4,17,2],[21,10,17,8,"checkOnboardingStatus"],[21,31,17,29],[21,34,17,32],[21,40,17,32,"checkOnboardingStatus"],[21,41,17,32],[21,46,17,44],[22,6,18,4],[22,10,18,8],[23,8,19,6],[23,14,19,12,"hasCompletedOnboarding"],[23,36,19,34],[23,39,19,37],[23,45,19,43,"AsyncStorage"],[23,66,19,55],[23,67,19,56,"getItem"],[23,74,19,63],[23,75,19,64],[23,109,19,98],[23,110,19,99],[24,8,21,6,"console"],[24,15,21,13],[24,16,21,14,"log"],[24,19,21,17],[24,20,21,18],[24,51,21,49],[24,53,21,51,"hasCompletedOnboarding"],[24,75,21,73],[24,76,21,74],[25,8,23,6],[25,12,23,10],[25,13,23,11,"hasCompletedOnboarding"],[25,35,23,33],[25,37,23,35],[26,10,24,8],[27,10,25,8,"console"],[27,17,25,15],[27,18,25,16,"log"],[27,21,25,19],[27,22,25,20],[27,74,25,72],[27,75,25,73],[28,10,26,8,"setShowOnboarding"],[28,27,26,25],[28,28,26,26],[28,32,26,30],[28,33,26,31],[29,8,27,6],[29,9,27,7],[29,15,27,13],[30,10,28,8,"console"],[30,17,28,15],[30,18,28,16,"log"],[30,21,28,19],[30,22,28,20],[30,64,28,62],[30,65,28,63],[31,8,29,6],[32,6,30,4],[32,7,30,5],[32,8,30,6],[32,15,30,13,"error"],[32,20,30,18],[32,22,30,20],[33,8,31,6,"console"],[33,15,31,13],[33,16,31,14,"error"],[33,21,31,19],[33,22,31,20],[33,57,31,55],[33,59,31,57,"error"],[33,64,31,62],[33,65,31,63],[34,8,32,6],[35,8,33,6,"console"],[35,15,33,13],[35,16,33,14,"log"],[35,19,33,17],[35,20,33,18],[35,65,33,63],[35,66,33,64],[36,8,34,6,"setShowOnboarding"],[36,25,34,23],[36,26,34,24],[36,30,34,28],[36,31,34,29],[37,6,35,4],[37,7,35,5],[37,16,35,14],[38,8,36,6,"setIsLoading"],[38,20,36,18],[38,21,36,19],[38,26,36,24],[38,27,36,25],[39,6,37,4],[40,4,38,2],[40,5,38,3],[41,4,40,2],[41,10,40,8,"handleOnboardingComplete"],[41,34,40,32],[41,37,40,35],[41,43,40,42,"permissions"],[41,54,40,81],[41,58,40,86],[42,6,41,4,"console"],[42,13,41,11],[42,14,41,12,"log"],[42,17,41,15],[42,18,41,16],[42,40,41,38],[42,42,41,40,"permissions"],[42,53,41,51],[42,54,41,52],[44,6,43,4],[45,6,44,4],[45,10,44,8],[46,8,45,6],[46,14,45,12,"AsyncStorage"],[46,35,45,24],[46,36,45,25,"setItem"],[46,43,45,32],[46,44,45,33],[46,65,45,54],[46,67,45,56,"JSON"],[46,71,45,60],[46,72,45,61,"stringify"],[46,81,45,70],[46,82,45,71,"permissions"],[46,93,45,82],[46,94,45,83],[46,95,45,84],[47,8,46,6],[47,14,46,12,"AsyncStorage"],[47,35,46,24],[47,36,46,25,"setItem"],[47,43,46,32],[47,44,46,33],[47,78,46,67],[47,80,46,69],[47,86,46,75],[47,87,46,76],[48,6,47,4],[48,7,47,5],[48,8,47,6],[48,15,47,13,"error"],[48,20,47,18],[48,22,47,20],[49,8,48,6,"console"],[49,15,48,13],[49,16,48,14,"error"],[49,21,48,19],[49,22,48,20],[49,56,48,54],[49,58,48,56,"error"],[49,63,48,61],[49,64,48,62],[50,6,49,4],[51,6,51,4,"setShowOnboarding"],[51,23,51,21],[51,24,51,22],[51,29,51,27],[51,30,51,28],[52,4,52,2],[52,5,52,3],[53,4,54,2],[53,10,54,8,"handleOnboardingSkip"],[53,30,54,28],[53,33,54,31],[53,39,54,31,"handleOnboardingSkip"],[53,40,54,31],[53,45,54,43],[54,6,55,4,"console"],[54,13,55,11],[54,14,55,12,"log"],[54,17,55,15],[54,18,55,16],[54,55,55,53],[54,56,55,54],[55,6,57,4],[55,10,57,8],[56,8,58,6],[56,14,58,12,"AsyncStorage"],[56,35,58,24],[56,36,58,25,"setItem"],[56,43,58,32],[56,44,58,33],[56,78,58,67],[56,80,58,69],[56,86,58,75],[56,87,58,76],[57,8,59,6],[57,14,59,12,"AsyncStorage"],[57,35,59,24],[57,36,59,25,"setItem"],[57,43,59,32],[57,44,59,33],[57,65,59,54],[57,67,59,56],[57,73,59,62],[57,74,59,63],[58,6,60,4],[58,7,60,5],[58,8,60,6],[58,15,60,13,"error"],[58,20,60,18],[58,22,60,20],[59,8,61,6,"console"],[59,15,61,13],[59,16,61,14,"error"],[59,21,61,19],[59,22,61,20],[59,49,61,47],[59,51,61,49,"error"],[59,56,61,54],[59,57,61,55],[60,6,62,4],[61,6,64,4,"setShowOnboarding"],[61,23,64,21],[61,24,64,22],[61,29,64,27],[61,30,64,28],[62,4,65,2],[62,5,65,3],[63,4,67,2],[63,8,67,6,"isLoading"],[63,17,67,15],[63,19,67,17],[64,6,68,4],[65,6,69,4],[65,13,69,11],[65,17,69,15],[65,18,69,16],[65,19,69,17],[66,4,70,2],[67,4,72,2],[67,24,73,4],[67,28,73,4,"_jsxDevRuntime"],[67,42,73,4],[67,43,73,4,"jsxDEV"],[67,49,73,4],[67,51,73,4,"_jsxDevRuntime"],[67,65,73,4],[67,66,73,4,"Fragment"],[67,74,73,4],[68,6,73,4,"children"],[68,14,73,4],[68,17,74,7,"children"],[68,25,74,15],[68,40,75,6],[68,44,75,6,"_jsxDevRuntime"],[68,58,75,6],[68,59,75,6,"jsxDEV"],[68,65,75,6],[68,67,75,7,"_PermissionsOnboarding"],[68,89,75,7],[68,90,75,7,"default"],[68,97,75,28],[69,8,76,8,"visible"],[69,15,76,15],[69,17,76,17,"showOnboarding"],[69,31,76,32],[70,8,77,8,"onComplete"],[70,18,77,18],[70,20,77,20,"handleOnboardingComplete"],[70,44,77,45],[71,8,78,8,"onSkip"],[71,14,78,14],[71,16,78,16,"handleOnboardingSkip"],[72,6,78,37],[73,8,78,37,"fileName"],[73,16,78,37],[73,18,78,37,"_jsxFileName"],[73,30,78,37],[74,8,78,37,"lineNumber"],[74,18,78,37],[75,8,78,37,"columnNumber"],[75,20,78,37],[76,6,78,37],[76,13,79,7],[76,14,79,8],[77,4,79,8],[77,19,80,6],[77,20,80,7],[78,2,82,0],[79,0,82,1],[79,3]],"functionMap":{"names":["<global>","PermissionsManager","useEffect$argument_0","checkOnboardingStatus","handleOnboardingComplete","handleOnboardingSkip"],"mappings":"AAA;eCQ;YCI;GDE;gCEE;GFqB;mCGE;GHY;+BIE;GJW"}},"type":"js/module"}]}