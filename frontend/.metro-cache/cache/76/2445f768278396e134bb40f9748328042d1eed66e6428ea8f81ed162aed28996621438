{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":65,"index":65}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"./api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":66},"end":{"line":2,"column":37,"index":103}}],"key":"FbKPDeRJ9TF3vg1eKYKz12urgic=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _s = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.useStoriesCursor = useStoriesCursor;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _api = require(_dependencyMap[1], \"./api\");\n  function useStoriesCursor(initialCursor = null, pageSize = 24) {\n    _s();\n    const [stories, setStories] = (0, _react.useState)([]);\n    const [cursor, setCursor] = (0, _react.useState)(initialCursor);\n    const [loading, setLoading] = (0, _react.useState)(false);\n    const [done, setDone] = (0, _react.useState)(false);\n    const inflight = (0, _react.useRef)(null);\n    const loadMore = (0, _react.useCallback)(async () => {\n      if (loading || done) return;\n      setLoading(true);\n      try {\n        const p = (0, _api.fetchStories)(cursor, pageSize);\n        inflight.current = p;\n        const res = await p;\n        setStories(prev => [...prev, ...res.data]);\n        setCursor(res.cursor ?? null);\n        if (!res.cursor || res.data.length === 0) setDone(true);\n      } finally {\n        inflight.current = null;\n        setLoading(false);\n      }\n    }, [cursor, done, loading, pageSize]);\n    (0, _react.useEffect)(() => {\n      if (stories.length === 0) loadMore();\n    }, []); // initial\n\n    return {\n      stories,\n      loadMore,\n      loading,\n      done\n    };\n  }\n  _s(useStoriesCursor, \"5JnmqRw8Ouw9qUA1raTbjAHaxGs=\");\n});","lineCount":45,"map":[[8,2,5,0,"exports"],[8,9,5,0],[8,10,5,0,"useStoriesCursor"],[8,26,5,0],[8,29,5,0,"useStoriesCursor"],[8,45,5,0],[9,2,1,0],[9,6,1,0,"_react"],[9,12,1,0],[9,15,1,0,"require"],[9,22,1,0],[9,23,1,0,"_dependencyMap"],[9,37,1,0],[10,2,2,0],[10,6,2,0,"_api"],[10,10,2,0],[10,13,2,0,"require"],[10,20,2,0],[10,21,2,0,"_dependencyMap"],[10,35,2,0],[11,2,5,7],[11,11,5,16,"useStoriesCursor"],[11,27,5,32,"useStoriesCursor"],[11,28,5,33,"initialCursor"],[11,41,5,61],[11,44,5,64],[11,48,5,68],[11,50,5,70,"pageSize"],[11,58,5,78],[11,61,5,81],[11,63,5,83],[11,65,5,85],[12,4,5,85,"_s"],[12,6,5,85],[13,4,6,2],[13,10,6,8],[13,11,6,9,"stories"],[13,18,6,16],[13,20,6,18,"setStories"],[13,30,6,28],[13,31,6,29],[13,34,6,32],[13,38,6,32,"useState"],[13,44,6,40],[13,45,6,40,"useState"],[13,53,6,40],[13,55,6,50],[13,57,6,52],[13,58,6,53],[14,4,7,2],[14,10,7,8],[14,11,7,9,"cursor"],[14,17,7,15],[14,19,7,17,"setCursor"],[14,28,7,26],[14,29,7,27],[14,32,7,30],[14,36,7,30,"useState"],[14,42,7,38],[14,43,7,38,"useState"],[14,51,7,38],[14,53,7,54,"initialCursor"],[14,66,7,67],[14,67,7,68],[15,4,8,2],[15,10,8,8],[15,11,8,9,"loading"],[15,18,8,16],[15,20,8,18,"setLoading"],[15,30,8,28],[15,31,8,29],[15,34,8,32],[15,38,8,32,"useState"],[15,44,8,40],[15,45,8,40,"useState"],[15,53,8,40],[15,55,8,41],[15,60,8,46],[15,61,8,47],[16,4,9,2],[16,10,9,8],[16,11,9,9,"done"],[16,15,9,13],[16,17,9,15,"setDone"],[16,24,9,22],[16,25,9,23],[16,28,9,26],[16,32,9,26,"useState"],[16,38,9,34],[16,39,9,34,"useState"],[16,47,9,34],[16,49,9,35],[16,54,9,40],[16,55,9,41],[17,4,11,2],[17,10,11,8,"inflight"],[17,18,11,16],[17,21,11,19],[17,25,11,19,"useRef"],[17,31,11,25],[17,32,11,25,"useRef"],[17,38,11,25],[17,40,11,47],[17,44,11,51],[17,45,11,52],[18,4,13,2],[18,10,13,8,"loadMore"],[18,18,13,16],[18,21,13,19],[18,25,13,19,"useCallback"],[18,31,13,30],[18,32,13,30,"useCallback"],[18,43,13,30],[18,45,13,31],[18,57,13,43],[19,6,14,4],[19,10,14,8,"loading"],[19,17,14,15],[19,21,14,19,"done"],[19,25,14,23],[19,27,14,25],[20,6,15,4,"setLoading"],[20,16,15,14],[20,17,15,15],[20,21,15,19],[20,22,15,20],[21,6,16,4],[21,10,16,8],[22,8,17,6],[22,14,17,12,"p"],[22,15,17,13],[22,18,17,16],[22,22,17,16,"fetchStories"],[22,26,17,28],[22,27,17,28,"fetchStories"],[22,39,17,28],[22,41,17,29,"cursor"],[22,47,17,35],[22,49,17,37,"pageSize"],[22,57,17,45],[22,58,17,46],[23,8,18,6,"inflight"],[23,16,18,14],[23,17,18,15,"current"],[23,24,18,22],[23,27,18,25,"p"],[23,28,18,26],[24,8,19,6],[24,14,19,12,"res"],[24,17,19,15],[24,20,19,18],[24,26,19,24,"p"],[24,27,19,25],[25,8,20,6,"setStories"],[25,18,20,16],[25,19,20,18,"prev"],[25,23,20,22],[25,27,20,27],[25,28,20,28],[25,31,20,31,"prev"],[25,35,20,35],[25,37,20,37],[25,40,20,40,"res"],[25,43,20,43],[25,44,20,44,"data"],[25,48,20,48],[25,49,20,49],[25,50,20,50],[26,8,21,6,"setCursor"],[26,17,21,15],[26,18,21,16,"res"],[26,21,21,19],[26,22,21,20,"cursor"],[26,28,21,26],[26,32,21,30],[26,36,21,34],[26,37,21,35],[27,8,22,6],[27,12,22,10],[27,13,22,11,"res"],[27,16,22,14],[27,17,22,15,"cursor"],[27,23,22,21],[27,27,22,25,"res"],[27,30,22,28],[27,31,22,29,"data"],[27,35,22,33],[27,36,22,34,"length"],[27,42,22,40],[27,47,22,45],[27,48,22,46],[27,50,22,48,"setDone"],[27,57,22,55],[27,58,22,56],[27,62,22,60],[27,63,22,61],[28,6,23,4],[28,7,23,5],[28,16,23,14],[29,8,24,6,"inflight"],[29,16,24,14],[29,17,24,15,"current"],[29,24,24,22],[29,27,24,25],[29,31,24,29],[30,8,25,6,"setLoading"],[30,18,25,16],[30,19,25,17],[30,24,25,22],[30,25,25,23],[31,6,26,4],[32,4,27,2],[32,5,27,3],[32,7,27,5],[32,8,27,6,"cursor"],[32,14,27,12],[32,16,27,14,"done"],[32,20,27,18],[32,22,27,20,"loading"],[32,29,27,27],[32,31,27,29,"pageSize"],[32,39,27,37],[32,40,27,38],[32,41,27,39],[33,4,29,2],[33,8,29,2,"useEffect"],[33,14,29,11],[33,15,29,11,"useEffect"],[33,24,29,11],[33,26,29,12],[33,32,29,18],[34,6,29,20],[34,10,29,24,"stories"],[34,17,29,31],[34,18,29,32,"length"],[34,24,29,38],[34,29,29,43],[34,30,29,44],[34,32,29,46,"loadMore"],[34,40,29,54],[34,41,29,55],[34,42,29,56],[35,4,29,58],[35,5,29,59],[35,7,29,61],[35,9,29,63],[35,10,29,64],[35,11,29,65],[35,12,29,66],[37,4,31,2],[37,11,31,9],[38,6,31,11,"stories"],[38,13,31,18],[39,6,31,20,"loadMore"],[39,14,31,28],[40,6,31,30,"loading"],[40,13,31,37],[41,6,31,39,"done"],[42,4,31,44],[42,5,31,45],[43,2,32,0],[44,2,32,1,"_s"],[44,4,32,1],[44,5,5,16,"useStoriesCursor"],[44,21,5,32],[45,0,5,32],[45,3]],"functionMap":{"names":["<global>","useStoriesCursor","loadMore","setStories$argument_0","useEffect$argument_0"],"mappings":"AAA;OCI;+BCQ;iBCO,gCD;GDO;YGE,+CH"},"hasCjsExports":false},"type":"js/module"}]}