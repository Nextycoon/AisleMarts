{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.hash32 = hash32;\n  exports.inBucket = inBucket;\n  exports.assignBucket = assignBucket;\n  exports.assignRankerTreatment = assignRankerTreatment;\n  /**\n   * User Bucketing System for Canary Rollouts\n   * Provides stable hash-based user assignment for A/B testing\n   */\n\n  function hash32(s) {\n    let h = 2166136261 >>> 0;\n    for (let i = 0; i < s.length; i++) {\n      h = Math.imul(h ^ s.charCodeAt(i), 16777619) >>> 0;\n    }\n    return h >>> 0;\n  }\n  function inBucket(userId, pct) {\n    return hash32(userId) % 10000 < Math.floor(pct * 100); // e.g. 0.05 => 5%\n  }\n  function assignBucket(userId, config) {\n    const inCanary = inBucket(userId, config.canaryPct);\n    return {\n      treatment: inCanary ? 'treatment' : 'control',\n      inCanary\n    };\n  }\n\n  // Helper for ranker-specific bucketing\n  function assignRankerTreatment(userId) {\n    const canaryPct = parseFloat(process.env.EXPO_PUBLIC_RANKER_CANARY_PCT || '0.05');\n    const inCanary = inBucket(userId, canaryPct);\n    return {\n      algorithm: inCanary ? 'ucb1' : 'identity',\n      inCanary\n    };\n  }\n});","lineCount":43,"map":[[7,2,6,0,"exports"],[7,9,6,0],[7,10,6,0,"hash32"],[7,16,6,0],[7,19,6,0,"hash32"],[7,25,6,0],[8,2,14,0,"exports"],[8,9,14,0],[8,10,14,0,"inBucket"],[8,18,14,0],[8,21,14,0,"inBucket"],[8,29,14,0],[9,2,24,0,"exports"],[9,9,24,0],[9,10,24,0,"assignBucket"],[9,22,24,0],[9,25,24,0,"assignBucket"],[9,37,24,0],[10,2,36,0,"exports"],[10,9,36,0],[10,10,36,0,"assignRankerTreatment"],[10,31,36,0],[10,34,36,0,"assignRankerTreatment"],[10,55,36,0],[11,2,1,0],[12,0,2,0],[13,0,3,0],[14,0,4,0],[16,2,6,7],[16,11,6,16,"hash32"],[16,17,6,22,"hash32"],[16,18,6,23,"s"],[16,19,6,32],[16,21,6,42],[17,4,7,2],[17,8,7,6,"h"],[17,9,7,7],[17,12,7,10],[17,22,7,20],[17,27,7,25],[17,28,7,26],[18,4,8,2],[18,9,8,7],[18,13,8,11,"i"],[18,14,8,12],[18,17,8,15],[18,18,8,16],[18,20,8,18,"i"],[18,21,8,19],[18,24,8,22,"s"],[18,25,8,23],[18,26,8,24,"length"],[18,32,8,30],[18,34,8,32,"i"],[18,35,8,33],[18,37,8,35],[18,39,8,37],[19,6,9,4,"h"],[19,7,9,5],[19,10,9,8,"Math"],[19,14,9,12],[19,15,9,13,"imul"],[19,19,9,17],[19,20,9,18,"h"],[19,21,9,19],[19,24,9,22,"s"],[19,25,9,23],[19,26,9,24,"charCodeAt"],[19,36,9,34],[19,37,9,35,"i"],[19,38,9,36],[19,39,9,37],[19,41,9,39],[19,49,9,47],[19,50,9,48],[19,55,9,53],[19,56,9,54],[20,4,10,2],[21,4,11,2],[21,11,11,9,"h"],[21,12,11,10],[21,17,11,15],[21,18,11,16],[22,2,12,0],[23,2,14,7],[23,11,14,16,"inBucket"],[23,19,14,24,"inBucket"],[23,20,14,25,"userId"],[23,26,14,39],[23,28,14,41,"pct"],[23,31,14,52],[23,33,14,63],[24,4,15,2],[24,11,15,10,"hash32"],[24,17,15,16],[24,18,15,17,"userId"],[24,24,15,23],[24,25,15,24],[24,28,15,27],[24,33,15,32],[24,36,15,36,"Math"],[24,40,15,40],[24,41,15,41,"floor"],[24,46,15,46],[24,47,15,47,"pct"],[24,50,15,50],[24,53,15,53],[24,56,15,56],[24,57,15,57],[24,58,15,58],[24,59,15,59],[25,2,16,0],[26,2,24,7],[26,11,24,16,"assignBucket"],[26,23,24,28,"assignBucket"],[26,24,24,29,"userId"],[26,30,24,43],[26,32,24,45,"config"],[26,38,24,65],[26,40,27,2],[27,4,28,2],[27,10,28,8,"inCanary"],[27,18,28,16],[27,21,28,19,"inBucket"],[27,29,28,27],[27,30,28,28,"userId"],[27,36,28,34],[27,38,28,36,"config"],[27,44,28,42],[27,45,28,43,"canaryPct"],[27,54,28,52],[27,55,28,53],[28,4,29,2],[28,11,29,9],[29,6,30,4,"treatment"],[29,15,30,13],[29,17,30,15,"inCanary"],[29,25,30,23],[29,28,30,26],[29,39,30,37],[29,42,30,40],[29,51,30,49],[30,6,31,4,"inCanary"],[31,4,32,2],[31,5,32,3],[32,2,33,0],[34,2,35,0],[35,2,36,7],[35,11,36,16,"assignRankerTreatment"],[35,32,36,37,"assignRankerTreatment"],[35,33,36,38,"userId"],[35,39,36,52],[35,41,39,2],[36,4,40,2],[36,10,40,8,"canaryPct"],[36,19,40,17],[36,22,40,20,"parseFloat"],[36,32,40,30],[36,33,40,31,"process"],[36,40,40,38],[36,41,40,39,"env"],[36,44,40,42],[36,45,40,43,"EXPO_PUBLIC_RANKER_CANARY_PCT"],[36,74,40,72],[36,78,40,76],[36,84,40,82],[36,85,40,83],[37,4,41,2],[37,10,41,8,"inCanary"],[37,18,41,16],[37,21,41,19,"inBucket"],[37,29,41,27],[37,30,41,28,"userId"],[37,36,41,34],[37,38,41,36,"canaryPct"],[37,47,41,45],[37,48,41,46],[38,4,43,2],[38,11,43,9],[39,6,44,4,"algorithm"],[39,15,44,13],[39,17,44,15,"inCanary"],[39,25,44,23],[39,28,44,26],[39,34,44,32],[39,37,44,35],[39,47,44,45],[40,6,45,4,"inCanary"],[41,4,46,2],[41,5,46,3],[42,2,47,0],[43,0,47,1],[43,3]],"functionMap":{"names":["<global>","hash32","inBucket","assignBucket","assignRankerTreatment"],"mappings":"AAA;OCK;CDM;OEE;CFE;OGQ;CHS;OIG"},"hasCjsExports":false},"type":"js/module"}]}