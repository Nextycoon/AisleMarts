{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"expo-asset","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":35,"index":35}}],"key":"ZXJFWHziJpBZf3W7vl00wXf6fd8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"PreloadCoordinator\", {\n    enumerable: true,\n    get: function () {\n      return PreloadCoordinator;\n    }\n  });\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _babelRuntimeHelpersClassCallCheck = require(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\");\n  var _classCallCheck = _interopDefault(_babelRuntimeHelpersClassCallCheck);\n  var _babelRuntimeHelpersCreateClass = require(_dependencyMap[2], \"@babel/runtime/helpers/createClass\");\n  var _createClass = _interopDefault(_babelRuntimeHelpersCreateClass);\n  var _expoAsset = require(_dependencyMap[3], \"expo-asset\");\n  var PreloadCoordinator = /*#__PURE__*/function () {\n    function PreloadCoordinator(cache) {\n      (0, _classCallCheck.default)(this, PreloadCoordinator);\n      this.cache = cache;\n    }\n    return (0, _createClass.default)(PreloadCoordinator, [{\n      key: \"preloadStory\",\n      value: function () {\n        var _preloadStory = (0, _asyncToGenerator.default)(function* (story) {\n          if (!story?.mediaUrl) return;\n          if (this.cache.get(story.mediaUrl)) return; // already cached\n          try {\n            var asset = _expoAsset.Asset.fromURI(story.mediaUrl);\n            yield asset.downloadAsync();\n            var bytes = asset.downloaded ? asset.filesize ?? 1_000_000 : 1_000_000;\n            this.cache.set(story.mediaUrl, asset.localUri ?? story.mediaUrl, bytes);\n          } catch {\n            // ignore preload failures\n          }\n        });\n        function preloadStory(_x) {\n          return _preloadStory.apply(this, arguments);\n        }\n        return preloadStory;\n      }()\n    }, {\n      key: \"preloadNext\",\n      value: function () {\n        var _preloadNext = (0, _asyncToGenerator.default)(function* (currentIndex, stories, nextCreatorFirst) {\n          var next = stories[currentIndex + 1];\n          if (next) yield this.preloadStory(next);\n          if (nextCreatorFirst) yield this.preloadStory(nextCreatorFirst);\n        });\n        function preloadNext(_x2, _x3, _x4) {\n          return _preloadNext.apply(this, arguments);\n        }\n        return preloadNext;\n      }()\n    }]);\n  }();\n});","lineCount":65,"map":[[12,2,5,0,"Object"],[12,8,5,0],[12,9,5,0,"defineProperty"],[12,23,5,0],[12,24,5,0,"exports"],[12,31,5,0],[13,4,5,0,"enumerable"],[13,14,5,0],[14,4,5,0,"get"],[14,7,5,0],[14,18,5,0,"get"],[14,19,5,0],[15,6,5,0],[15,13,5,0,"PreloadCoordinator"],[15,31,5,0],[16,4,5,0],[17,2,5,0],[18,2,27,1],[18,6,27,1,"_babelRuntimeHelpersAsyncToGenerator"],[18,42,27,1],[18,45,27,1,"require"],[18,52,27,1],[18,53,27,1,"_dependencyMap"],[18,67,27,1],[19,2,27,1],[19,6,27,1,"_asyncToGenerator"],[19,23,27,1],[19,26,27,1,"_interopDefault"],[19,41,27,1],[19,42,27,1,"_babelRuntimeHelpersAsyncToGenerator"],[19,78,27,1],[20,2,27,1],[20,6,27,1,"_babelRuntimeHelpersClassCallCheck"],[20,40,27,1],[20,43,27,1,"require"],[20,50,27,1],[20,51,27,1,"_dependencyMap"],[20,65,27,1],[21,2,27,1],[21,6,27,1,"_classCallCheck"],[21,21,27,1],[21,24,27,1,"_interopDefault"],[21,39,27,1],[21,40,27,1,"_babelRuntimeHelpersClassCallCheck"],[21,74,27,1],[22,2,27,1],[22,6,27,1,"_babelRuntimeHelpersCreateClass"],[22,37,27,1],[22,40,27,1,"require"],[22,47,27,1],[22,48,27,1,"_dependencyMap"],[22,62,27,1],[23,2,27,1],[23,6,27,1,"_createClass"],[23,18,27,1],[23,21,27,1,"_interopDefault"],[23,36,27,1],[23,37,27,1,"_babelRuntimeHelpersCreateClass"],[23,68,27,1],[24,2,1,0],[24,6,1,0,"_expoAsset"],[24,16,1,0],[24,19,1,0,"require"],[24,26,1,0],[24,27,1,0,"_dependencyMap"],[24,41,1,0],[25,2,1,35],[25,6,5,13,"PreloadCoordinator"],[25,24,5,31],[26,4,7,2],[26,13,7,2,"PreloadCoordinator"],[26,32,7,14,"cache"],[26,37,7,34],[26,39,7,36],[27,6,7,36],[27,10,7,36,"_classCallCheck"],[27,25,7,36],[27,26,7,36,"default"],[27,33,7,36],[27,41,7,36,"PreloadCoordinator"],[27,59,7,36],[28,6,7,38],[28,10,7,42],[28,11,7,43,"cache"],[28,16,7,48],[28,19,7,51,"cache"],[28,24,7,56],[29,4,7,58],[30,4,7,59],[30,15,7,59,"_createClass"],[30,27,7,59],[30,28,7,59,"default"],[30,35,7,59],[30,37,7,59,"PreloadCoordinator"],[30,55,7,59],[31,6,7,59,"key"],[31,9,7,59],[32,6,7,59,"value"],[32,11,7,59],[33,8,7,59],[33,12,7,59,"_preloadStory"],[33,25,7,59],[33,32,7,59,"_asyncToGenerator"],[33,49,7,59],[33,50,7,59,"default"],[33,57,7,59],[33,59,9,2],[33,70,9,21,"story"],[33,75,9,33],[33,77,9,35],[34,10,10,4],[34,14,10,8],[34,15,10,9,"story"],[34,20,10,14],[34,22,10,16,"mediaUrl"],[34,30,10,24],[34,32,10,26],[35,10,11,4],[35,14,11,8],[35,18,11,12],[35,19,11,13,"cache"],[35,24,11,18],[35,25,11,19,"get"],[35,28,11,22],[35,29,11,23,"story"],[35,34,11,28],[35,35,11,29,"mediaUrl"],[35,43,11,37],[35,44,11,38],[35,46,11,40],[35,53,11,47],[35,54,11,48],[36,10,12,4],[36,14,12,8],[37,12,13,6],[37,16,13,12,"asset"],[37,21,13,17],[37,24,13,20,"Asset"],[37,34,13,25],[37,35,13,25,"Asset"],[37,40,13,25],[37,41,13,26,"fromURI"],[37,48,13,33],[37,49,13,34,"story"],[37,54,13,39],[37,55,13,40,"mediaUrl"],[37,63,13,48],[37,64,13,49],[38,12,14,6],[38,18,14,12,"asset"],[38,23,14,17],[38,24,14,18,"downloadAsync"],[38,37,14,31],[38,38,14,32],[38,39,14,33],[39,12,15,6],[39,16,15,12,"bytes"],[39,21,15,17],[39,24,15,21,"asset"],[39,29,15,26],[39,30,15,35,"downloaded"],[39,40,15,45],[39,43,15,49,"asset"],[39,48,15,54],[39,49,15,63,"filesize"],[39,57,15,71],[39,61,15,75],[39,70,15,84],[39,73,15,87],[39,82,15,96],[40,12,16,6],[40,16,16,10],[40,17,16,11,"cache"],[40,22,16,16],[40,23,16,17,"set"],[40,26,16,20],[40,27,16,21,"story"],[40,32,16,26],[40,33,16,27,"mediaUrl"],[40,41,16,35],[40,43,16,37,"asset"],[40,48,16,42],[40,49,16,43,"localUri"],[40,57,16,51],[40,61,16,55,"story"],[40,66,16,60],[40,67,16,61,"mediaUrl"],[40,75,16,69],[40,77,16,71,"bytes"],[40,82,16,76],[40,83,16,77],[41,10,17,4],[41,11,17,5],[41,12,17,6],[41,18,17,12],[42,12,18,6],[43,10,18,6],[44,8,20,2],[44,9,20,3],[45,8,20,3],[45,17,9,8,"preloadStory"],[45,29,9,20,"preloadStory"],[45,30,9,20,"_x"],[45,32,9,20],[46,10,9,20],[46,17,9,20,"_preloadStory"],[46,30,9,20],[46,31,9,20,"apply"],[46,36,9,20],[46,43,9,20,"arguments"],[46,52,9,20],[47,8,9,20],[48,8,9,20],[48,15,9,8,"preloadStory"],[48,27,9,20],[49,6,9,20],[50,4,9,20],[51,6,9,20,"key"],[51,9,9,20],[52,6,9,20,"value"],[52,11,9,20],[53,8,9,20],[53,12,9,20,"_preloadNext"],[53,24,9,20],[53,31,9,20,"_asyncToGenerator"],[53,48,9,20],[53,49,9,20,"default"],[53,56,9,20],[53,58,22,2],[53,69,22,20,"currentIndex"],[53,81,22,40],[53,83,22,42,"stories"],[53,90,22,58],[53,92,22,60,"nextCreatorFirst"],[53,108,22,84],[53,110,22,86],[54,10,23,4],[54,14,23,10,"next"],[54,18,23,14],[54,21,23,17,"stories"],[54,28,23,24],[54,29,23,25,"currentIndex"],[54,41,23,37],[54,44,23,40],[54,45,23,41],[54,46,23,42],[55,10,24,4],[55,14,24,8,"next"],[55,18,24,12],[55,20,24,14],[55,26,24,20],[55,30,24,24],[55,31,24,25,"preloadStory"],[55,43,24,37],[55,44,24,38,"next"],[55,48,24,42],[55,49,24,43],[56,10,25,4],[56,14,25,8,"nextCreatorFirst"],[56,30,25,24],[56,32,25,26],[56,38,25,32],[56,42,25,36],[56,43,25,37,"preloadStory"],[56,55,25,49],[56,56,25,50,"nextCreatorFirst"],[56,72,25,66],[56,73,25,67],[57,8,26,2],[57,9,26,3],[58,8,26,3],[58,17,22,8,"preloadNext"],[58,28,22,19,"preloadNext"],[58,29,22,19,"_x2"],[58,32,22,19],[58,34,22,19,"_x3"],[58,37,22,19],[58,39,22,19,"_x4"],[58,42,22,19],[59,10,22,19],[59,17,22,19,"_preloadNext"],[59,29,22,19],[59,30,22,19,"apply"],[59,35,22,19],[59,42,22,19,"arguments"],[59,51,22,19],[60,8,22,19],[61,8,22,19],[61,15,22,8,"preloadNext"],[61,26,22,19],[62,6,22,19],[63,4,22,19],[64,2,22,19],[65,0,22,19],[65,3]],"functionMap":{"names":["<global>","PreloadCoordinator","constructor","preloadStory","preloadNext"],"mappings":"AAA;OCI;ECE,yDD;EEE;GFW;EGE;GHI"},"hasCjsExports":false},"type":"js/module"}]}