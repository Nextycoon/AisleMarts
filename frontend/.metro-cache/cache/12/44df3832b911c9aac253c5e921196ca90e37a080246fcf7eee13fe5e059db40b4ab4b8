{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"]}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":51,"index":51}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"]}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":52},"end":{"line":2,"column":69,"index":121}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"]}},{"name":"./PermissionsOnboarding","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":122},"end":{"line":3,"column":60,"index":182}}],"key":"6oNt/AlnSN+gKfExTdyP8okYaS8=","exportNames":["*"]}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = PermissionsManager;\n  var _react = _interopRequireWildcard(require(_dependencyMap[1], \"react\"));\n  var _asyncStorage = _interopRequireDefault(require(_dependencyMap[2], \"@react-native-async-storage/async-storage\"));\n  var _PermissionsOnboarding = _interopRequireDefault(require(_dependencyMap[3], \"./PermissionsOnboarding\"));\n  var _jsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  var _jsxFileName = \"/app/frontend/src/components/PermissionsManager.tsx\",\n    _s = $RefreshSig$();\n  function _interopRequireWildcard(e, t) { if (\"function\" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) \"default\" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }\n  function PermissionsManager({\n    children\n  }) {\n    _s();\n    const [showOnboarding, setShowOnboarding] = (0, _react.useState)(false);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n    (0, _react.useEffect)(() => {\n      checkOnboardingStatus();\n    }, []);\n    const checkOnboardingStatus = async () => {\n      try {\n        const hasCompletedOnboarding = await _asyncStorage.default.getItem('permissions_onboarding_completed');\n        console.log('Permissions onboarding check:', hasCompletedOnboarding);\n        if (!hasCompletedOnboarding) {\n          // Show onboarding for first-time users\n          console.log('Showing permissions onboarding for first-time user');\n          setShowOnboarding(true);\n        } else {\n          console.log('Permissions onboarding already completed');\n        }\n      } catch (error) {\n        console.error('Error checking onboarding status:', error);\n        // Show onboarding on error to be safe\n        console.log('Showing permissions onboarding due to error');\n        setShowOnboarding(true);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const handleOnboardingComplete = async permissions => {\n      console.log('Permissions granted:', permissions);\n\n      // Track permissions for analytics\n      try {\n        await _asyncStorage.default.setItem('initial_permissions', JSON.stringify(permissions));\n        await _asyncStorage.default.setItem('permissions_onboarding_completed', 'true');\n      } catch (error) {\n        console.error('Error saving permissions status:', error);\n      }\n      setShowOnboarding(false);\n    };\n    const handleOnboardingSkip = async () => {\n      console.log('User skipped permissions onboarding');\n      try {\n        await _asyncStorage.default.setItem('permissions_onboarding_completed', 'true');\n        await _asyncStorage.default.setItem('permissions_skipped', 'true');\n      } catch (error) {\n        console.error('Error saving skip status:', error);\n      }\n      setShowOnboarding(false);\n    };\n    if (isLoading) {\n      // Show loading state while checking onboarding status\n      return null; // Or a loading component\n    }\n    return /*#__PURE__*/(0, _jsxDevRuntime.jsxDEV)(_jsxDevRuntime.Fragment, {\n      children: [children, /*#__PURE__*/(0, _jsxDevRuntime.jsxDEV)(_PermissionsOnboarding.default, {\n        visible: showOnboarding,\n        onComplete: handleOnboardingComplete,\n        onSkip: handleOnboardingSkip\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true);\n  }\n  _s(PermissionsManager, \"Ej3kgduhWiLJK6fD/4PcdBkqPWg=\");\n  _c = PermissionsManager;\n  var _c;\n  $RefreshReg$(_c, \"PermissionsManager\");\n});","lineCount":85,"map":[[7,2,1,0],[7,6,1,0,"_react"],[7,12,1,0],[7,15,1,0,"_interopRequireWildcard"],[7,38,1,0],[7,39,1,0,"require"],[7,46,1,0],[7,47,1,0,"_dependencyMap"],[7,61,1,0],[8,2,2,0],[8,6,2,0,"_asyncStorage"],[8,19,2,0],[8,22,2,0,"_interopRequireDefault"],[8,44,2,0],[8,45,2,0,"require"],[8,52,2,0],[8,53,2,0,"_dependencyMap"],[8,67,2,0],[9,2,3,0],[9,6,3,0,"_PermissionsOnboarding"],[9,28,3,0],[9,31,3,0,"_interopRequireDefault"],[9,53,3,0],[9,54,3,0,"require"],[9,61,3,0],[9,62,3,0,"_dependencyMap"],[9,76,3,0],[10,2,3,60],[10,6,3,60,"_jsxDevRuntime"],[10,20,3,60],[10,23,3,60,"require"],[10,30,3,60],[10,31,3,60,"_dependencyMap"],[10,45,3,60],[11,2,3,60],[11,6,3,60,"_jsxFileName"],[11,18,3,60],[12,4,3,60,"_s"],[12,6,3,60],[12,9,3,60,"$RefreshSig$"],[12,21,3,60],[13,2,3,60],[13,11,3,60,"_interopRequireWildcard"],[13,35,3,60,"e"],[13,36,3,60],[13,38,3,60,"t"],[13,39,3,60],[13,68,3,60,"WeakMap"],[13,75,3,60],[13,81,3,60,"r"],[13,82,3,60],[13,89,3,60,"WeakMap"],[13,96,3,60],[13,100,3,60,"n"],[13,101,3,60],[13,108,3,60,"WeakMap"],[13,115,3,60],[13,127,3,60,"_interopRequireWildcard"],[13,150,3,60],[13,162,3,60,"_interopRequireWildcard"],[13,163,3,60,"e"],[13,164,3,60],[13,166,3,60,"t"],[13,167,3,60],[13,176,3,60,"t"],[13,177,3,60],[13,181,3,60,"e"],[13,182,3,60],[13,186,3,60,"e"],[13,187,3,60],[13,188,3,60,"__esModule"],[13,198,3,60],[13,207,3,60,"e"],[13,208,3,60],[13,214,3,60,"o"],[13,215,3,60],[13,217,3,60,"i"],[13,218,3,60],[13,220,3,60,"f"],[13,221,3,60],[13,226,3,60,"__proto__"],[13,235,3,60],[13,243,3,60,"default"],[13,250,3,60],[13,252,3,60,"e"],[13,253,3,60],[13,270,3,60,"e"],[13,271,3,60],[13,294,3,60,"e"],[13,295,3,60],[13,320,3,60,"e"],[13,321,3,60],[13,330,3,60,"f"],[13,331,3,60],[13,337,3,60,"o"],[13,338,3,60],[13,341,3,60,"t"],[13,342,3,60],[13,345,3,60,"n"],[13,346,3,60],[13,349,3,60,"r"],[13,350,3,60],[13,358,3,60,"o"],[13,359,3,60],[13,360,3,60,"has"],[13,363,3,60],[13,364,3,60,"e"],[13,365,3,60],[13,375,3,60,"o"],[13,376,3,60],[13,377,3,60,"get"],[13,380,3,60],[13,381,3,60,"e"],[13,382,3,60],[13,385,3,60,"o"],[13,386,3,60],[13,387,3,60,"set"],[13,390,3,60],[13,391,3,60,"e"],[13,392,3,60],[13,394,3,60,"f"],[13,395,3,60],[13,411,3,60,"t"],[13,412,3,60],[13,416,3,60,"e"],[13,417,3,60],[13,433,3,60,"t"],[13,434,3,60],[13,441,3,60,"hasOwnProperty"],[13,455,3,60],[13,456,3,60,"call"],[13,460,3,60],[13,461,3,60,"e"],[13,462,3,60],[13,464,3,60,"t"],[13,465,3,60],[13,472,3,60,"i"],[13,473,3,60],[13,477,3,60,"o"],[13,478,3,60],[13,481,3,60,"Object"],[13,487,3,60],[13,488,3,60,"defineProperty"],[13,502,3,60],[13,507,3,60,"Object"],[13,513,3,60],[13,514,3,60,"getOwnPropertyDescriptor"],[13,538,3,60],[13,539,3,60,"e"],[13,540,3,60],[13,542,3,60,"t"],[13,543,3,60],[13,550,3,60,"i"],[13,551,3,60],[13,552,3,60,"get"],[13,555,3,60],[13,559,3,60,"i"],[13,560,3,60],[13,561,3,60,"set"],[13,564,3,60],[13,568,3,60,"o"],[13,569,3,60],[13,570,3,60,"f"],[13,571,3,60],[13,573,3,60,"t"],[13,574,3,60],[13,576,3,60,"i"],[13,577,3,60],[13,581,3,60,"f"],[13,582,3,60],[13,583,3,60,"t"],[13,584,3,60],[13,588,3,60,"e"],[13,589,3,60],[13,590,3,60,"t"],[13,591,3,60],[13,602,3,60,"f"],[13,603,3,60],[13,608,3,60,"e"],[13,609,3,60],[13,611,3,60,"t"],[13,612,3,60],[14,2,9,15],[14,11,9,24,"PermissionsManager"],[14,29,9,42,"PermissionsManager"],[14,30,9,43],[15,4,9,45,"children"],[16,2,9,79],[16,3,9,80],[16,5,9,82],[17,4,9,82,"_s"],[17,6,9,82],[18,4,10,2],[18,10,10,8],[18,11,10,9,"showOnboarding"],[18,25,10,23],[18,27,10,25,"setShowOnboarding"],[18,44,10,42],[18,45,10,43],[18,48,10,46],[18,52,10,46,"useState"],[18,67,10,54],[18,69,10,55],[18,74,10,60],[18,75,10,61],[19,4,11,2],[19,10,11,8],[19,11,11,9,"isLoading"],[19,20,11,18],[19,22,11,20,"setIsLoading"],[19,34,11,32],[19,35,11,33],[19,38,11,36],[19,42,11,36,"useState"],[19,57,11,44],[19,59,11,45],[19,63,11,49],[19,64,11,50],[20,4,13,2],[20,8,13,2,"useEffect"],[20,24,13,11],[20,26,13,12],[20,32,13,18],[21,6,14,4,"checkOnboardingStatus"],[21,27,14,25],[21,28,14,26],[21,29,14,27],[22,4,15,2],[22,5,15,3],[22,7,15,5],[22,9,15,7],[22,10,15,8],[23,4,17,2],[23,10,17,8,"checkOnboardingStatus"],[23,31,17,29],[23,34,17,32],[23,40,17,32,"checkOnboardingStatus"],[23,41,17,32],[23,46,17,44],[24,6,18,4],[24,10,18,8],[25,8,19,6],[25,14,19,12,"hasCompletedOnboarding"],[25,36,19,34],[25,39,19,37],[25,45,19,43,"AsyncStorage"],[25,66,19,55],[25,67,19,56,"getItem"],[25,74,19,63],[25,75,19,64],[25,109,19,98],[25,110,19,99],[26,8,21,6,"console"],[26,15,21,13],[26,16,21,14,"log"],[26,19,21,17],[26,20,21,18],[26,51,21,49],[26,53,21,51,"hasCompletedOnboarding"],[26,75,21,73],[26,76,21,74],[27,8,23,6],[27,12,23,10],[27,13,23,11,"hasCompletedOnboarding"],[27,35,23,33],[27,37,23,35],[28,10,24,8],[29,10,25,8,"console"],[29,17,25,15],[29,18,25,16,"log"],[29,21,25,19],[29,22,25,20],[29,74,25,72],[29,75,25,73],[30,10,26,8,"setShowOnboarding"],[30,27,26,25],[30,28,26,26],[30,32,26,30],[30,33,26,31],[31,8,27,6],[31,9,27,7],[31,15,27,13],[32,10,28,8,"console"],[32,17,28,15],[32,18,28,16,"log"],[32,21,28,19],[32,22,28,20],[32,64,28,62],[32,65,28,63],[33,8,29,6],[34,6,30,4],[34,7,30,5],[34,8,30,6],[34,15,30,13,"error"],[34,20,30,18],[34,22,30,20],[35,8,31,6,"console"],[35,15,31,13],[35,16,31,14,"error"],[35,21,31,19],[35,22,31,20],[35,57,31,55],[35,59,31,57,"error"],[35,64,31,62],[35,65,31,63],[36,8,32,6],[37,8,33,6,"console"],[37,15,33,13],[37,16,33,14,"log"],[37,19,33,17],[37,20,33,18],[37,65,33,63],[37,66,33,64],[38,8,34,6,"setShowOnboarding"],[38,25,34,23],[38,26,34,24],[38,30,34,28],[38,31,34,29],[39,6,35,4],[39,7,35,5],[39,16,35,14],[40,8,36,6,"setIsLoading"],[40,20,36,18],[40,21,36,19],[40,26,36,24],[40,27,36,25],[41,6,37,4],[42,4,38,2],[42,5,38,3],[43,4,40,2],[43,10,40,8,"handleOnboardingComplete"],[43,34,40,32],[43,37,40,35],[43,43,40,42,"permissions"],[43,54,40,81],[43,58,40,86],[44,6,41,4,"console"],[44,13,41,11],[44,14,41,12,"log"],[44,17,41,15],[44,18,41,16],[44,40,41,38],[44,42,41,40,"permissions"],[44,53,41,51],[44,54,41,52],[46,6,43,4],[47,6,44,4],[47,10,44,8],[48,8,45,6],[48,14,45,12,"AsyncStorage"],[48,35,45,24],[48,36,45,25,"setItem"],[48,43,45,32],[48,44,45,33],[48,65,45,54],[48,67,45,56,"JSON"],[48,71,45,60],[48,72,45,61,"stringify"],[48,81,45,70],[48,82,45,71,"permissions"],[48,93,45,82],[48,94,45,83],[48,95,45,84],[49,8,46,6],[49,14,46,12,"AsyncStorage"],[49,35,46,24],[49,36,46,25,"setItem"],[49,43,46,32],[49,44,46,33],[49,78,46,67],[49,80,46,69],[49,86,46,75],[49,87,46,76],[50,6,47,4],[50,7,47,5],[50,8,47,6],[50,15,47,13,"error"],[50,20,47,18],[50,22,47,20],[51,8,48,6,"console"],[51,15,48,13],[51,16,48,14,"error"],[51,21,48,19],[51,22,48,20],[51,56,48,54],[51,58,48,56,"error"],[51,63,48,61],[51,64,48,62],[52,6,49,4],[53,6,51,4,"setShowOnboarding"],[53,23,51,21],[53,24,51,22],[53,29,51,27],[53,30,51,28],[54,4,52,2],[54,5,52,3],[55,4,54,2],[55,10,54,8,"handleOnboardingSkip"],[55,30,54,28],[55,33,54,31],[55,39,54,31,"handleOnboardingSkip"],[55,40,54,31],[55,45,54,43],[56,6,55,4,"console"],[56,13,55,11],[56,14,55,12,"log"],[56,17,55,15],[56,18,55,16],[56,55,55,53],[56,56,55,54],[57,6,57,4],[57,10,57,8],[58,8,58,6],[58,14,58,12,"AsyncStorage"],[58,35,58,24],[58,36,58,25,"setItem"],[58,43,58,32],[58,44,58,33],[58,78,58,67],[58,80,58,69],[58,86,58,75],[58,87,58,76],[59,8,59,6],[59,14,59,12,"AsyncStorage"],[59,35,59,24],[59,36,59,25,"setItem"],[59,43,59,32],[59,44,59,33],[59,65,59,54],[59,67,59,56],[59,73,59,62],[59,74,59,63],[60,6,60,4],[60,7,60,5],[60,8,60,6],[60,15,60,13,"error"],[60,20,60,18],[60,22,60,20],[61,8,61,6,"console"],[61,15,61,13],[61,16,61,14,"error"],[61,21,61,19],[61,22,61,20],[61,49,61,47],[61,51,61,49,"error"],[61,56,61,54],[61,57,61,55],[62,6,62,4],[63,6,64,4,"setShowOnboarding"],[63,23,64,21],[63,24,64,22],[63,29,64,27],[63,30,64,28],[64,4,65,2],[64,5,65,3],[65,4,67,2],[65,8,67,6,"isLoading"],[65,17,67,15],[65,19,67,17],[66,6,68,4],[67,6,69,4],[67,13,69,11],[67,17,69,15],[67,18,69,16],[67,19,69,17],[68,4,70,2],[69,4,72,2],[69,24,73,4],[69,28,73,4,"_jsxDevRuntime"],[69,42,73,4],[69,43,73,4,"jsxDEV"],[69,49,73,4],[69,51,73,4,"_jsxDevRuntime"],[69,65,73,4],[69,66,73,4,"Fragment"],[69,74,73,4],[70,6,73,4,"children"],[70,14,73,4],[70,17,74,7,"children"],[70,25,74,15],[70,40,75,6],[70,44,75,6,"_jsxDevRuntime"],[70,58,75,6],[70,59,75,6,"jsxDEV"],[70,65,75,6],[70,67,75,7,"_PermissionsOnboarding"],[70,89,75,7],[70,90,75,7,"default"],[70,97,75,28],[71,8,76,8,"visible"],[71,15,76,15],[71,17,76,17,"showOnboarding"],[71,31,76,32],[72,8,77,8,"onComplete"],[72,18,77,18],[72,20,77,20,"handleOnboardingComplete"],[72,44,77,45],[73,8,78,8,"onSkip"],[73,14,78,14],[73,16,78,16,"handleOnboardingSkip"],[74,6,78,37],[75,8,78,37,"fileName"],[75,16,78,37],[75,18,78,37,"_jsxFileName"],[75,30,78,37],[76,8,78,37,"lineNumber"],[76,18,78,37],[77,8,78,37,"columnNumber"],[77,20,78,37],[78,6,78,37],[78,13,79,7],[78,14,79,8],[79,4,79,8],[79,19,80,6],[79,20,80,7],[80,2,82,0],[81,2,82,1,"_s"],[81,4,82,1],[81,5,9,24,"PermissionsManager"],[81,23,9,42],[82,2,9,42,"_c"],[82,4,9,42],[82,7,9,24,"PermissionsManager"],[82,25,9,42],[83,2,9,42],[83,6,9,42,"_c"],[83,8,9,42],[84,2,9,42,"$RefreshReg$"],[84,14,9,42],[84,15,9,42,"_c"],[84,17,9,42],[85,0,9,42],[85,3]],"functionMap":{"names":["<global>","PermissionsManager","useEffect$argument_0","checkOnboardingStatus","handleOnboardingComplete","handleOnboardingSkip"],"mappings":"AAA;eCQ;YCI;GDE;gCEE;GFqB;mCGE;GHY;+BIE;GJW"}},"type":"js/module"}]}