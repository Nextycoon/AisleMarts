{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":46,"index":46}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"]}},{"name":"../utils/permissions","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":47},"end":{"line":2,"column":75,"index":122}}],"key":"c6RvmcwrBtJnYvrON2S3T4w6zrE=","exportNames":["*"]}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.usePhotosPermission = exports.usePermissions = exports.useNotificationsPermission = exports.useMicrophonePermission = exports.useLocationPermission = exports.useCameraPermission = void 0;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _permissions = require(_dependencyMap[1], \"../utils/permissions\");\n  const usePermissions = () => {\n    const [isLoading, setIsLoading] = (0, _react.useState)(false);\n    const [currentPermissionType, setCurrentPermissionType] = (0, _react.useState)(null);\n    const [showPrePrompt, setShowPrePrompt] = (0, _react.useState)(false);\n    const [prePromptResolver, setPrePromptResolver] = (0, _react.useState)(null);\n    const showPermissionPrePrompt = (0, _react.useCallback)(type => {\n      return new Promise(resolve => {\n        setCurrentPermissionType(type);\n        setPrePromptResolver(() => resolve);\n        setShowPrePrompt(true);\n      });\n    }, []);\n    const handlePrePromptContinue = (0, _react.useCallback)(() => {\n      setShowPrePrompt(false);\n      if (prePromptResolver) {\n        prePromptResolver(true);\n      }\n      setPrePromptResolver(null);\n    }, [prePromptResolver]);\n    const handlePrePromptNotNow = (0, _react.useCallback)(() => {\n      setShowPrePrompt(false);\n      if (prePromptResolver) {\n        prePromptResolver(false);\n      }\n      setPrePromptResolver(null);\n    }, [prePromptResolver]);\n    const requestPermission = (0, _react.useCallback)(async (type, context) => {\n      setIsLoading(true);\n      try {\n        const result = await _permissions.PermissionManager.requestWithPrePrompt(type, context, showPermissionPrePrompt);\n        return result;\n      } catch (error) {\n        console.error('Permission request error:', error);\n        return 'denied';\n      } finally {\n        setIsLoading(false);\n        setCurrentPermissionType(null);\n      }\n    }, [showPermissionPrePrompt]);\n    return {\n      requestPermission,\n      isLoading,\n      // Expose pre-prompt state for UI components\n      showPrePrompt,\n      currentPermissionType,\n      onPrePromptContinue: handlePrePromptContinue,\n      onPrePromptNotNow: handlePrePromptNotNow\n    };\n  };\n\n  // Helper hook for specific permission types with built-in UI\n  exports.usePermissions = usePermissions;\n  const useCameraPermission = () => {\n    const {\n      requestPermission,\n      isLoading\n    } = usePermissions();\n    const requestCamera = (0, _react.useCallback)(async (context = 'scan') => {\n      return await requestPermission('camera', context);\n    }, [requestPermission]);\n    return {\n      requestCamera,\n      isLoading\n    };\n  };\n  exports.useCameraPermission = useCameraPermission;\n  const useMicrophonePermission = () => {\n    const {\n      requestPermission,\n      isLoading\n    } = usePermissions();\n    const requestMicrophone = (0, _react.useCallback)(async (context = 'voice') => {\n      return await requestPermission('microphone', context);\n    }, [requestPermission]);\n    return {\n      requestMicrophone,\n      isLoading\n    };\n  };\n  exports.useMicrophonePermission = useMicrophonePermission;\n  const useLocationPermission = () => {\n    const {\n      requestPermission,\n      isLoading\n    } = usePermissions();\n    const requestLocation = (0, _react.useCallback)(async (context = 'nearby') => {\n      return await requestPermission('location', context);\n    }, [requestPermission]);\n    return {\n      requestLocation,\n      isLoading\n    };\n  };\n  exports.useLocationPermission = useLocationPermission;\n  const usePhotosPermission = () => {\n    const {\n      requestPermission,\n      isLoading\n    } = usePermissions();\n    const requestPhotos = (0, _react.useCallback)(async (context = 'upload') => {\n      return await requestPermission('photos', context);\n    }, [requestPermission]);\n    return {\n      requestPhotos,\n      isLoading\n    };\n  };\n  exports.usePhotosPermission = usePhotosPermission;\n  const useNotificationsPermission = () => {\n    const {\n      requestPermission,\n      isLoading\n    } = usePermissions();\n    const requestNotifications = (0, _react.useCallback)(async (context = 'alerts') => {\n      return await requestPermission('notifications', context);\n    }, [requestPermission]);\n    return {\n      requestNotifications,\n      isLoading\n    };\n  };\n  exports.useNotificationsPermission = useNotificationsPermission;\n});","lineCount":130,"map":[[6,2,1,0],[6,6,1,0,"_react"],[6,12,1,0],[6,15,1,0,"require"],[6,22,1,0],[6,23,1,0,"_dependencyMap"],[6,37,1,0],[7,2,2,0],[7,6,2,0,"_permissions"],[7,18,2,0],[7,21,2,0,"require"],[7,28,2,0],[7,29,2,0,"_dependencyMap"],[7,43,2,0],[8,2,12,7],[8,8,12,13,"usePermissions"],[8,22,12,27],[8,25,12,30,"usePermissions"],[8,26,12,30],[8,31,12,58],[9,4,13,2],[9,10,13,8],[9,11,13,9,"isLoading"],[9,20,13,18],[9,22,13,20,"setIsLoading"],[9,34,13,32],[9,35,13,33],[9,38,13,36],[9,42,13,36,"useState"],[9,57,13,44],[9,59,13,45],[9,64,13,50],[9,65,13,51],[10,4,14,2],[10,10,14,8],[10,11,14,9,"currentPermissionType"],[10,32,14,30],[10,34,14,32,"setCurrentPermissionType"],[10,58,14,56],[10,59,14,57],[10,62,14,60],[10,66,14,60,"useState"],[10,81,14,68],[10,83,14,84],[10,87,14,88],[10,88,14,89],[11,4,15,2],[11,10,15,8],[11,11,15,9,"showPrePrompt"],[11,24,15,22],[11,26,15,24,"setShowPrePrompt"],[11,42,15,40],[11,43,15,41],[11,46,15,44],[11,50,15,44,"useState"],[11,65,15,52],[11,67,15,53],[11,72,15,58],[11,73,15,59],[12,4,16,2],[12,10,16,8],[12,11,16,9,"prePromptResolver"],[12,28,16,26],[12,30,16,28,"setPrePromptResolver"],[12,50,16,48],[12,51,16,49],[12,54,16,52],[12,58,16,52,"useState"],[12,73,16,60],[12,75,16,96],[12,79,16,100],[12,80,16,101],[13,4,18,2],[13,10,18,8,"showPermissionPrePrompt"],[13,33,18,31],[13,36,18,34],[13,40,18,34,"useCallback"],[13,58,18,45],[13,60,18,47,"type"],[13,64,18,59],[13,68,18,82],[14,6,19,4],[14,13,19,11],[14,17,19,15,"Promise"],[14,24,19,22],[14,25,19,24,"resolve"],[14,32,19,31],[14,36,19,36],[15,8,20,6,"setCurrentPermissionType"],[15,32,20,30],[15,33,20,31,"type"],[15,37,20,35],[15,38,20,36],[16,8,21,6,"setPrePromptResolver"],[16,28,21,26],[16,29,21,27],[16,35,21,33,"resolve"],[16,42,21,40],[16,43,21,41],[17,8,22,6,"setShowPrePrompt"],[17,24,22,22],[17,25,22,23],[17,29,22,27],[17,30,22,28],[18,6,23,4],[18,7,23,5],[18,8,23,6],[19,4,24,2],[19,5,24,3],[19,7,24,5],[19,9,24,7],[19,10,24,8],[20,4,26,2],[20,10,26,8,"handlePrePromptContinue"],[20,33,26,31],[20,36,26,34],[20,40,26,34,"useCallback"],[20,58,26,45],[20,60,26,46],[20,66,26,52],[21,6,27,4,"setShowPrePrompt"],[21,22,27,20],[21,23,27,21],[21,28,27,26],[21,29,27,27],[22,6,28,4],[22,10,28,8,"prePromptResolver"],[22,27,28,25],[22,29,28,27],[23,8,29,6,"prePromptResolver"],[23,25,29,23],[23,26,29,24],[23,30,29,28],[23,31,29,29],[24,6,30,4],[25,6,31,4,"setPrePromptResolver"],[25,26,31,24],[25,27,31,25],[25,31,31,29],[25,32,31,30],[26,4,32,2],[26,5,32,3],[26,7,32,5],[26,8,32,6,"prePromptResolver"],[26,25,32,23],[26,26,32,24],[26,27,32,25],[27,4,34,2],[27,10,34,8,"handlePrePromptNotNow"],[27,31,34,29],[27,34,34,32],[27,38,34,32,"useCallback"],[27,56,34,43],[27,58,34,44],[27,64,34,50],[28,6,35,4,"setShowPrePrompt"],[28,22,35,20],[28,23,35,21],[28,28,35,26],[28,29,35,27],[29,6,36,4],[29,10,36,8,"prePromptResolver"],[29,27,36,25],[29,29,36,27],[30,8,37,6,"prePromptResolver"],[30,25,37,23],[30,26,37,24],[30,31,37,29],[30,32,37,30],[31,6,38,4],[32,6,39,4,"setPrePromptResolver"],[32,26,39,24],[32,27,39,25],[32,31,39,29],[32,32,39,30],[33,4,40,2],[33,5,40,3],[33,7,40,5],[33,8,40,6,"prePromptResolver"],[33,25,40,23],[33,26,40,24],[33,27,40,25],[34,4,42,2],[34,10,42,8,"requestPermission"],[34,27,42,25],[34,30,42,28],[34,34,42,28,"useCallback"],[34,52,42,39],[34,54,42,40],[34,61,43,4,"type"],[34,65,43,75],[34,67,44,4,"context"],[34,74,44,19],[34,79,45,34],[35,6,46,4,"setIsLoading"],[35,18,46,16],[35,19,46,17],[35,23,46,21],[35,24,46,22],[36,6,48,4],[36,10,48,8],[37,8,49,6],[37,14,49,12,"result"],[37,20,49,18],[37,23,49,21],[37,29,49,27,"PermissionManager"],[37,59,49,44],[37,60,49,45,"requestWithPrePrompt"],[37,80,49,65],[37,81,50,8,"type"],[37,85,50,12],[37,87,51,8,"context"],[37,94,51,15],[37,96,52,8,"showPermissionPrePrompt"],[37,119,53,6],[37,120,53,7],[38,8,55,6],[38,15,55,13,"result"],[38,21,55,19],[39,6,56,4],[39,7,56,5],[39,8,56,6],[39,15,56,13,"error"],[39,20,56,18],[39,22,56,20],[40,8,57,6,"console"],[40,15,57,13],[40,16,57,14,"error"],[40,21,57,19],[40,22,57,20],[40,49,57,47],[40,51,57,49,"error"],[40,56,57,54],[40,57,57,55],[41,8,58,6],[41,15,58,13],[41,23,58,21],[42,6,59,4],[42,7,59,5],[42,16,59,14],[43,8,60,6,"setIsLoading"],[43,20,60,18],[43,21,60,19],[43,26,60,24],[43,27,60,25],[44,8,61,6,"setCurrentPermissionType"],[44,32,61,30],[44,33,61,31],[44,37,61,35],[44,38,61,36],[45,6,62,4],[46,4,63,2],[46,5,63,3],[46,7,63,5],[46,8,63,6,"showPermissionPrePrompt"],[46,31,63,29],[46,32,63,30],[46,33,63,31],[47,4,65,2],[47,11,65,9],[48,6,66,4,"requestPermission"],[48,23,66,21],[49,6,67,4,"isLoading"],[49,15,67,13],[50,6,68,4],[51,6,69,4,"showPrePrompt"],[51,19,69,17],[52,6,70,4,"currentPermissionType"],[52,27,70,25],[53,6,71,4,"onPrePromptContinue"],[53,25,71,23],[53,27,71,25,"handlePrePromptContinue"],[53,50,71,48],[54,6,72,4,"onPrePromptNotNow"],[54,23,72,21],[54,25,72,23,"handlePrePromptNotNow"],[55,4,73,2],[55,5,73,3],[56,2,79,0],[56,3,79,1],[58,2,81,0],[59,2,81,0,"exports"],[59,9,81,0],[59,10,81,0,"usePermissions"],[59,24,81,0],[59,27,81,0,"usePermissions"],[59,41,81,0],[60,2,82,7],[60,8,82,13,"useCameraPermission"],[60,27,82,32],[60,30,82,35,"useCameraPermission"],[60,31,82,35],[60,36,82,41],[61,4,83,2],[61,10,83,8],[62,6,83,10,"requestPermission"],[62,23,83,27],[63,6,83,29,"isLoading"],[64,4,83,39],[64,5,83,40],[64,8,83,43,"usePermissions"],[64,22,83,57],[64,23,83,58],[64,24,83,59],[65,4,85,2],[65,10,85,8,"requestCamera"],[65,23,85,21],[65,26,85,24],[65,30,85,24,"useCallback"],[65,48,85,35],[65,50,85,36],[65,57,85,43,"context"],[65,64,85,50],[65,67,85,53],[65,73,85,59],[65,78,85,64],[66,6,86,4],[66,13,86,11],[66,19,86,17,"requestPermission"],[66,36,86,34],[66,37,86,35],[66,45,86,43],[66,47,86,45,"context"],[66,54,86,52],[66,55,86,53],[67,4,87,2],[67,5,87,3],[67,7,87,5],[67,8,87,6,"requestPermission"],[67,25,87,23],[67,26,87,24],[67,27,87,25],[68,4,89,2],[68,11,89,9],[69,6,89,11,"requestCamera"],[69,19,89,24],[70,6,89,26,"isLoading"],[71,4,89,36],[71,5,89,37],[72,2,90,0],[72,3,90,1],[73,2,90,2,"exports"],[73,9,90,2],[73,10,90,2,"useCameraPermission"],[73,29,90,2],[73,32,90,2,"useCameraPermission"],[73,51,90,2],[74,2,92,7],[74,8,92,13,"useMicrophonePermission"],[74,31,92,36],[74,34,92,39,"useMicrophonePermission"],[74,35,92,39],[74,40,92,45],[75,4,93,2],[75,10,93,8],[76,6,93,10,"requestPermission"],[76,23,93,27],[77,6,93,29,"isLoading"],[78,4,93,39],[78,5,93,40],[78,8,93,43,"usePermissions"],[78,22,93,57],[78,23,93,58],[78,24,93,59],[79,4,95,2],[79,10,95,8,"requestMicrophone"],[79,27,95,25],[79,30,95,28],[79,34,95,28,"useCallback"],[79,52,95,39],[79,54,95,40],[79,61,95,47,"context"],[79,68,95,54],[79,71,95,57],[79,78,95,64],[79,83,95,69],[80,6,96,4],[80,13,96,11],[80,19,96,17,"requestPermission"],[80,36,96,34],[80,37,96,35],[80,49,96,47],[80,51,96,49,"context"],[80,58,96,56],[80,59,96,57],[81,4,97,2],[81,5,97,3],[81,7,97,5],[81,8,97,6,"requestPermission"],[81,25,97,23],[81,26,97,24],[81,27,97,25],[82,4,99,2],[82,11,99,9],[83,6,99,11,"requestMicrophone"],[83,23,99,28],[84,6,99,30,"isLoading"],[85,4,99,40],[85,5,99,41],[86,2,100,0],[86,3,100,1],[87,2,100,2,"exports"],[87,9,100,2],[87,10,100,2,"useMicrophonePermission"],[87,33,100,2],[87,36,100,2,"useMicrophonePermission"],[87,59,100,2],[88,2,102,7],[88,8,102,13,"useLocationPermission"],[88,29,102,34],[88,32,102,37,"useLocationPermission"],[88,33,102,37],[88,38,102,43],[89,4,103,2],[89,10,103,8],[90,6,103,10,"requestPermission"],[90,23,103,27],[91,6,103,29,"isLoading"],[92,4,103,39],[92,5,103,40],[92,8,103,43,"usePermissions"],[92,22,103,57],[92,23,103,58],[92,24,103,59],[93,4,105,2],[93,10,105,8,"requestLocation"],[93,25,105,23],[93,28,105,26],[93,32,105,26,"useCallback"],[93,50,105,37],[93,52,105,38],[93,59,105,45,"context"],[93,66,105,52],[93,69,105,55],[93,77,105,63],[93,82,105,68],[94,6,106,4],[94,13,106,11],[94,19,106,17,"requestPermission"],[94,36,106,34],[94,37,106,35],[94,47,106,45],[94,49,106,47,"context"],[94,56,106,54],[94,57,106,55],[95,4,107,2],[95,5,107,3],[95,7,107,5],[95,8,107,6,"requestPermission"],[95,25,107,23],[95,26,107,24],[95,27,107,25],[96,4,109,2],[96,11,109,9],[97,6,109,11,"requestLocation"],[97,21,109,26],[98,6,109,28,"isLoading"],[99,4,109,38],[99,5,109,39],[100,2,110,0],[100,3,110,1],[101,2,110,2,"exports"],[101,9,110,2],[101,10,110,2,"useLocationPermission"],[101,31,110,2],[101,34,110,2,"useLocationPermission"],[101,55,110,2],[102,2,112,7],[102,8,112,13,"usePhotosPermission"],[102,27,112,32],[102,30,112,35,"usePhotosPermission"],[102,31,112,35],[102,36,112,41],[103,4,113,2],[103,10,113,8],[104,6,113,10,"requestPermission"],[104,23,113,27],[105,6,113,29,"isLoading"],[106,4,113,39],[106,5,113,40],[106,8,113,43,"usePermissions"],[106,22,113,57],[106,23,113,58],[106,24,113,59],[107,4,115,2],[107,10,115,8,"requestPhotos"],[107,23,115,21],[107,26,115,24],[107,30,115,24,"useCallback"],[107,48,115,35],[107,50,115,36],[107,57,115,43,"context"],[107,64,115,50],[107,67,115,53],[107,75,115,61],[107,80,115,66],[108,6,116,4],[108,13,116,11],[108,19,116,17,"requestPermission"],[108,36,116,34],[108,37,116,35],[108,45,116,43],[108,47,116,45,"context"],[108,54,116,52],[108,55,116,53],[109,4,117,2],[109,5,117,3],[109,7,117,5],[109,8,117,6,"requestPermission"],[109,25,117,23],[109,26,117,24],[109,27,117,25],[110,4,119,2],[110,11,119,9],[111,6,119,11,"requestPhotos"],[111,19,119,24],[112,6,119,26,"isLoading"],[113,4,119,36],[113,5,119,37],[114,2,120,0],[114,3,120,1],[115,2,120,2,"exports"],[115,9,120,2],[115,10,120,2,"usePhotosPermission"],[115,29,120,2],[115,32,120,2,"usePhotosPermission"],[115,51,120,2],[116,2,122,7],[116,8,122,13,"useNotificationsPermission"],[116,34,122,39],[116,37,122,42,"useNotificationsPermission"],[116,38,122,42],[116,43,122,48],[117,4,123,2],[117,10,123,8],[118,6,123,10,"requestPermission"],[118,23,123,27],[119,6,123,29,"isLoading"],[120,4,123,39],[120,5,123,40],[120,8,123,43,"usePermissions"],[120,22,123,57],[120,23,123,58],[120,24,123,59],[121,4,125,2],[121,10,125,8,"requestNotifications"],[121,30,125,28],[121,33,125,31],[121,37,125,31,"useCallback"],[121,55,125,42],[121,57,125,43],[121,64,125,50,"context"],[121,71,125,57],[121,74,125,60],[121,82,125,68],[121,87,125,73],[122,6,126,4],[122,13,126,11],[122,19,126,17,"requestPermission"],[122,36,126,34],[122,37,126,35],[122,52,126,50],[122,54,126,52,"context"],[122,61,126,59],[122,62,126,60],[123,4,127,2],[123,5,127,3],[123,7,127,5],[123,8,127,6,"requestPermission"],[123,25,127,23],[123,26,127,24],[123,27,127,25],[124,4,129,2],[124,11,129,9],[125,6,129,11,"requestNotifications"],[125,26,129,31],[126,6,129,33,"isLoading"],[127,4,129,43],[127,5,129,44],[128,2,130,0],[128,3,130,1],[129,2,130,2,"exports"],[129,9,130,2],[129,10,130,2,"useNotificationsPermission"],[129,36,130,2],[129,39,130,2,"useNotificationsPermission"],[129,65,130,2],[130,0,130,2],[130,3]],"functionMap":{"names":["<global>","usePermissions","showPermissionPrePrompt","Promise$argument_0","setPrePromptResolver$argument_0","handlePrePromptContinue","handlePrePromptNotNow","requestPermission","useCameraPermission","requestCamera","useMicrophonePermission","requestMicrophone","useLocationPermission","requestLocation","usePhotosPermission","requestPhotos","useNotificationsPermission","requestNotifications"],"mappings":"AAA;8BCW;8CCM;uBCC;2BCE,aD;KDE;GDC;8CIE;GJM;4CKE;GLM;wCME;GNqB;CDgB;mCQG;oCCG;GDE;CRG;uCUE;wCCG;GDE;CVG;qCYE;sCCG;GDE;CZG;mCcE;oCCG;GDE;CdG;0CgBE;2CCG;GDE;ChBG"}},"type":"js/module"}]}