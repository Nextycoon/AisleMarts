{"dependencies":[{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@react-native-community/netinfo","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":54,"index":54}}],"key":"PqZcYTlMIVnzFjdViPzMiGUu7Hg=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":55},"end":{"line":2,"column":69,"index":124}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.enqueue = enqueue;\n  exports.bootFlusher = bootFlusher;\n  var _babelRuntimeHelpersAsyncToGenerator = require(_dependencyMap[0], \"@babel/runtime/helpers/asyncToGenerator\");\n  var _asyncToGenerator = _interopDefault(_babelRuntimeHelpersAsyncToGenerator);\n  var _reactNativeCommunityNetinfo = require(_dependencyMap[1], \"@react-native-community/netinfo\");\n  var NetInfo = _interopDefault(_reactNativeCommunityNetinfo);\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[2], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var KEY = \"offline-queue-v1\";\n  function enqueue(_x, _x2, _x3) {\n    return _enqueue.apply(this, arguments);\n  }\n  function _enqueue() {\n    _enqueue = (0, _asyncToGenerator.default)(function* (url, body, headers) {\n      var q = JSON.parse((yield AsyncStorage.default.getItem(KEY)) || \"[]\");\n      q.push({\n        url,\n        body,\n        headers,\n        ts: Date.now()\n      });\n      yield AsyncStorage.default.setItem(KEY, JSON.stringify(q));\n    });\n    return _enqueue.apply(this, arguments);\n  }\n  function bootFlusher() {\n    var fetcher = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : fetch;\n    var flush = /*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator.default)(function* () {\n        var raw = yield AsyncStorage.default.getItem(KEY);\n        if (!raw) return;\n        var q = JSON.parse(raw);\n        var next = [];\n        for (var item of q) {\n          try {\n            var r = yield fetcher(item.url, {\n              method: \"POST\",\n              headers: item.headers,\n              body: JSON.stringify(item.body)\n            });\n            if (r.ok || r.status === 409) continue; // delivered or replay\n            next.push(item);\n          } catch {\n            next.push(item);\n          }\n        }\n        yield AsyncStorage.default.setItem(KEY, JSON.stringify(next));\n      });\n      return function flush() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    NetInfo.default.addEventListener(s => s.isConnected && flush());\n    return {\n      flush\n    };\n  }\n});","lineCount":69,"map":[[12,2,6,0,"exports"],[12,9,6,0],[12,10,6,0,"enqueue"],[12,17,6,0],[12,20,6,0,"enqueue"],[12,27,6,0],[13,2,12,0,"exports"],[13,9,12,0],[13,10,12,0,"bootFlusher"],[13,21,12,0],[13,24,12,0,"bootFlusher"],[13,35,12,0],[14,2,29,1],[14,6,29,1,"_babelRuntimeHelpersAsyncToGenerator"],[14,42,29,1],[14,45,29,1,"require"],[14,52,29,1],[14,53,29,1,"_dependencyMap"],[14,67,29,1],[15,2,29,1],[15,6,29,1,"_asyncToGenerator"],[15,23,29,1],[15,26,29,1,"_interopDefault"],[15,41,29,1],[15,42,29,1,"_babelRuntimeHelpersAsyncToGenerator"],[15,78,29,1],[16,2,1,0],[16,6,1,0,"_reactNativeCommunityNetinfo"],[16,34,1,0],[16,37,1,0,"require"],[16,44,1,0],[16,45,1,0,"_dependencyMap"],[16,59,1,0],[17,2,1,0],[17,6,1,0,"NetInfo"],[17,13,1,0],[17,16,1,0,"_interopDefault"],[17,31,1,0],[17,32,1,0,"_reactNativeCommunityNetinfo"],[17,60,1,0],[18,2,2,0],[18,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[18,42,2,0],[18,45,2,0,"require"],[18,52,2,0],[18,53,2,0,"_dependencyMap"],[18,67,2,0],[19,2,2,0],[19,6,2,0,"AsyncStorage"],[19,18,2,0],[19,21,2,0,"_interopDefault"],[19,36,2,0],[19,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[19,73,2,0],[20,2,4,0],[20,6,4,6,"KEY"],[20,9,4,9],[20,12,4,12],[20,30,4,30],[21,2,4,31],[21,11,6,22,"enqueue"],[21,18,6,29,"enqueue"],[21,19,6,29,"_x"],[21,21,6,29],[21,23,6,29,"_x2"],[21,26,6,29],[21,28,6,29,"_x3"],[21,31,6,29],[22,4,6,29],[22,11,6,29,"_enqueue"],[22,19,6,29],[22,20,6,29,"apply"],[22,25,6,29],[22,32,6,29,"arguments"],[22,41,6,29],[23,2,6,29],[24,2,6,29],[24,11,6,29,"_enqueue"],[24,20,6,29],[25,4,6,29,"_enqueue"],[25,12,6,29],[25,19,6,29,"_asyncToGenerator"],[25,36,6,29],[25,37,6,29,"default"],[25,44,6,29],[25,46,6,7],[25,57,6,30,"url"],[25,60,6,41],[25,62,6,43,"body"],[25,66,6,52],[25,68,6,54,"headers"],[25,75,6,84],[25,77,6,86],[26,6,7,2],[26,10,7,8,"q"],[26,11,7,9],[26,14,7,12,"JSON"],[26,18,7,16],[26,19,7,17,"parse"],[26,24,7,22],[26,25,7,23],[26,32,7,30,"AsyncStorage"],[26,44,7,42],[26,45,7,42,"default"],[26,52,7,42],[26,53,7,43,"getItem"],[26,60,7,50],[26,61,7,51,"KEY"],[26,64,7,54],[26,65,7,55],[26,70,7,60],[26,74,7,64],[26,75,7,65],[27,6,8,2,"q"],[27,7,8,3],[27,8,8,4,"push"],[27,12,8,8],[27,13,8,9],[28,8,8,11,"url"],[28,11,8,14],[29,8,8,16,"body"],[29,12,8,20],[30,8,8,22,"headers"],[30,15,8,29],[31,8,8,31,"ts"],[31,10,8,33],[31,12,8,35,"Date"],[31,16,8,39],[31,17,8,40,"now"],[31,20,8,43],[31,21,8,44],[32,6,8,46],[32,7,8,47],[32,8,8,48],[33,6,9,2],[33,12,9,8,"AsyncStorage"],[33,24,9,20],[33,25,9,20,"default"],[33,32,9,20],[33,33,9,21,"setItem"],[33,40,9,28],[33,41,9,29,"KEY"],[33,44,9,32],[33,46,9,34,"JSON"],[33,50,9,38],[33,51,9,39,"stringify"],[33,60,9,48],[33,61,9,49,"q"],[33,62,9,50],[33,63,9,51],[33,64,9,52],[34,4,10,0],[34,5,10,1],[35,4,10,1],[35,11,10,1,"_enqueue"],[35,19,10,1],[35,20,10,1,"apply"],[35,25,10,1],[35,32,10,1,"arguments"],[35,41,10,1],[36,2,10,1],[37,2,12,7],[37,11,12,16,"bootFlusher"],[37,22,12,27,"bootFlusher"],[37,23,12,27],[37,25,12,45],[38,4,12,45],[38,8,12,28,"fetcher"],[38,15,12,35],[38,18,12,35,"arguments"],[38,27,12,35],[38,28,12,35,"length"],[38,34,12,35],[38,42,12,35,"arguments"],[38,51,12,35],[38,59,12,35,"undefined"],[38,68,12,35],[38,71,12,35,"arguments"],[38,80,12,35],[38,86,12,38,"fetch"],[38,91,12,43],[39,4,13,2],[39,8,13,8,"flush"],[39,13,13,13],[40,6,13,13],[40,10,13,13,"_ref"],[40,14,13,13],[40,21,13,13,"_asyncToGenerator"],[40,38,13,13],[40,39,13,13,"default"],[40,46,13,13],[40,48,13,16],[40,61,13,28],[41,8,14,4],[41,12,14,10,"raw"],[41,15,14,13],[41,24,14,22,"AsyncStorage"],[41,36,14,34],[41,37,14,34,"default"],[41,44,14,34],[41,45,14,35,"getItem"],[41,52,14,42],[41,53,14,43,"KEY"],[41,56,14,46],[41,57,14,47],[42,8,15,4],[42,12,15,8],[42,13,15,9,"raw"],[42,16,15,12],[42,18,15,14],[43,8,16,4],[43,12,16,10,"q"],[43,13,16,11],[43,16,16,14,"JSON"],[43,20,16,18],[43,21,16,19,"parse"],[43,26,16,24],[43,27,16,25,"raw"],[43,30,16,28],[43,31,16,29],[44,8,17,4],[44,12,17,10,"next"],[44,16,17,14],[44,19,17,17],[44,21,17,31],[45,8,18,4],[45,13,18,9],[45,17,18,15,"item"],[45,21,18,19],[45,25,18,23,"q"],[45,26,18,24],[45,28,18,26],[46,10,19,6],[46,14,19,10],[47,12,20,8],[47,16,20,14,"r"],[47,17,20,15],[47,26,20,24,"fetcher"],[47,33,20,31],[47,34,20,32,"item"],[47,38,20,36],[47,39,20,37,"url"],[47,42,20,40],[47,44,20,42],[48,14,20,44,"method"],[48,20,20,50],[48,22,20,51],[48,28,20,57],[49,14,20,59,"headers"],[49,21,20,66],[49,23,20,67,"item"],[49,27,20,71],[49,28,20,72,"headers"],[49,35,20,79],[50,14,20,81,"body"],[50,18,20,85],[50,20,20,87,"JSON"],[50,24,20,91],[50,25,20,92,"stringify"],[50,34,20,101],[50,35,20,102,"item"],[50,39,20,106],[50,40,20,107,"body"],[50,44,20,111],[51,12,20,113],[51,13,20,114],[51,14,20,115],[52,12,21,8],[52,16,21,12,"r"],[52,17,21,13],[52,18,21,14,"ok"],[52,20,21,16],[52,24,21,20,"r"],[52,25,21,21],[52,26,21,22,"status"],[52,32,21,28],[52,37,21,33],[52,40,21,36],[52,42,21,38],[52,51,21,47],[52,52,21,48],[53,12,22,8,"next"],[53,16,22,12],[53,17,22,13,"push"],[53,21,22,17],[53,22,22,18,"item"],[53,26,22,22],[53,27,22,23],[54,10,23,6],[54,11,23,7],[54,12,23,8],[54,18,23,14],[55,12,23,16,"next"],[55,16,23,20],[55,17,23,21,"push"],[55,21,23,25],[55,22,23,26,"item"],[55,26,23,30],[55,27,23,31],[56,10,23,33],[57,8,24,4],[58,8,25,4],[58,14,25,10,"AsyncStorage"],[58,26,25,22],[58,27,25,22,"default"],[58,34,25,22],[58,35,25,23,"setItem"],[58,42,25,30],[58,43,25,31,"KEY"],[58,46,25,34],[58,48,25,36,"JSON"],[58,52,25,40],[58,53,25,41,"stringify"],[58,62,25,50],[58,63,25,51,"next"],[58,67,25,55],[58,68,25,56],[58,69,25,57],[59,6,26,2],[59,7,26,3],[60,6,26,3],[60,22,13,8,"flush"],[60,27,13,13,"flush"],[60,28,13,13],[61,8,13,13],[61,15,13,13,"_ref"],[61,19,13,13],[61,20,13,13,"apply"],[61,25,13,13],[61,32,13,13,"arguments"],[61,41,13,13],[62,6,13,13],[63,4,13,13],[63,7,26,3],[64,4,27,2,"NetInfo"],[64,11,27,9],[64,12,27,9,"default"],[64,19,27,9],[64,20,27,10,"addEventListener"],[64,36,27,26],[64,37,27,28,"s"],[64,38,27,29],[64,42,27,34,"s"],[64,43,27,35],[64,44,27,36,"isConnected"],[64,55,27,47],[64,59,27,51,"flush"],[64,64,27,56],[64,65,27,57],[64,66,27,58],[64,67,27,59],[65,4,28,2],[65,11,28,9],[66,6,28,11,"flush"],[67,4,28,17],[67,5,28,18],[68,2,29,0],[69,0,29,1],[69,3]],"functionMap":{"names":["<global>","enqueue","bootFlusher","flush","NetInfo.addEventListener$argument_0"],"mappings":"AAA;OCK;CDI;OEE;gBCC;GDa;2BEC,+BF"},"hasCjsExports":false},"type":"js/module"}]}