{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.hash32 = hash32;\n  exports.inBucket = inBucket;\n  exports.assignBucket = assignBucket;\n  exports.assignRankerTreatment = assignRankerTreatment;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  /**\n   * User Bucketing System for Canary Rollouts\n   * Provides stable hash-based user assignment for A/B testing\n   */\n\n  function hash32(s) {\n    var h = 2166136261 >>> 0;\n    for (var i = 0; i < s.length; i++) {\n      h = Math.imul(h ^ s.charCodeAt(i), 16777619) >>> 0;\n    }\n    return h >>> 0;\n  }\n  function inBucket(userId, pct) {\n    return hash32(userId) % 10000 < Math.floor(pct * 100); // e.g. 0.05 => 5%\n  }\n  function assignBucket(userId, config) {\n    var inCanary = inBucket(userId, config.canaryPct);\n    return {\n      treatment: inCanary ? 'treatment' : 'control',\n      inCanary\n    };\n  }\n\n  // Helper for ranker-specific bucketing\n  function assignRankerTreatment(userId) {\n    var canaryPct = parseFloat(_expoVirtualEnv.env.EXPO_PUBLIC_RANKER_CANARY_PCT || '0.05');\n    var inCanary = inBucket(userId, canaryPct);\n    return {\n      algorithm: inCanary ? 'ucb1' : 'identity',\n      inCanary\n    };\n  }\n});","lineCount":44,"map":[[7,2,6,0,"exports"],[7,9,6,0],[7,10,6,0,"hash32"],[7,16,6,0],[7,19,6,0,"hash32"],[7,25,6,0],[8,2,14,0,"exports"],[8,9,14,0],[8,10,14,0,"inBucket"],[8,18,14,0],[8,21,14,0,"inBucket"],[8,29,14,0],[9,2,24,0,"exports"],[9,9,24,0],[9,10,24,0,"assignBucket"],[9,22,24,0],[9,25,24,0,"assignBucket"],[9,37,24,0],[10,2,36,0,"exports"],[10,9,36,0],[10,10,36,0,"assignRankerTreatment"],[10,31,36,0],[10,34,36,0,"assignRankerTreatment"],[10,55,36,0],[11,2,47,1],[11,6,47,1,"_expoVirtualEnv"],[11,21,47,1],[11,24,47,1,"require"],[11,31,47,1],[11,32,47,1,"_dependencyMap"],[11,46,47,1],[12,2,1,0],[13,0,2,0],[14,0,3,0],[15,0,4,0],[17,2,6,7],[17,11,6,16,"hash32"],[17,17,6,22,"hash32"],[17,18,6,23,"s"],[17,19,6,32],[17,21,6,42],[18,4,7,2],[18,8,7,6,"h"],[18,9,7,7],[18,12,7,10],[18,22,7,20],[18,27,7,25],[18,28,7,26],[19,4,8,2],[19,9,8,7],[19,13,8,11,"i"],[19,14,8,12],[19,17,8,15],[19,18,8,16],[19,20,8,18,"i"],[19,21,8,19],[19,24,8,22,"s"],[19,25,8,23],[19,26,8,24,"length"],[19,32,8,30],[19,34,8,32,"i"],[19,35,8,33],[19,37,8,35],[19,39,8,37],[20,6,9,4,"h"],[20,7,9,5],[20,10,9,8,"Math"],[20,14,9,12],[20,15,9,13,"imul"],[20,19,9,17],[20,20,9,18,"h"],[20,21,9,19],[20,24,9,22,"s"],[20,25,9,23],[20,26,9,24,"charCodeAt"],[20,36,9,34],[20,37,9,35,"i"],[20,38,9,36],[20,39,9,37],[20,41,9,39],[20,49,9,47],[20,50,9,48],[20,55,9,53],[20,56,9,54],[21,4,10,2],[22,4,11,2],[22,11,11,9,"h"],[22,12,11,10],[22,17,11,15],[22,18,11,16],[23,2,12,0],[24,2,14,7],[24,11,14,16,"inBucket"],[24,19,14,24,"inBucket"],[24,20,14,25,"userId"],[24,26,14,39],[24,28,14,41,"pct"],[24,31,14,52],[24,33,14,63],[25,4,15,2],[25,11,15,10,"hash32"],[25,17,15,16],[25,18,15,17,"userId"],[25,24,15,23],[25,25,15,24],[25,28,15,27],[25,33,15,32],[25,36,15,36,"Math"],[25,40,15,40],[25,41,15,41,"floor"],[25,46,15,46],[25,47,15,47,"pct"],[25,50,15,50],[25,53,15,53],[25,56,15,56],[25,57,15,57],[25,58,15,58],[25,59,15,59],[26,2,16,0],[27,2,24,7],[27,11,24,16,"assignBucket"],[27,23,24,28,"assignBucket"],[27,24,24,29,"userId"],[27,30,24,43],[27,32,24,45,"config"],[27,38,24,65],[27,40,27,2],[28,4,28,2],[28,8,28,8,"inCanary"],[28,16,28,16],[28,19,28,19,"inBucket"],[28,27,28,27],[28,28,28,28,"userId"],[28,34,28,34],[28,36,28,36,"config"],[28,42,28,42],[28,43,28,43,"canaryPct"],[28,52,28,52],[28,53,28,53],[29,4,29,2],[29,11,29,9],[30,6,30,4,"treatment"],[30,15,30,13],[30,17,30,15,"inCanary"],[30,25,30,23],[30,28,30,26],[30,39,30,37],[30,42,30,40],[30,51,30,49],[31,6,31,4,"inCanary"],[32,4,32,2],[32,5,32,3],[33,2,33,0],[35,2,35,0],[36,2,36,7],[36,11,36,16,"assignRankerTreatment"],[36,32,36,37,"assignRankerTreatment"],[36,33,36,38,"userId"],[36,39,36,52],[36,41,39,2],[37,4,40,2],[37,8,40,8,"canaryPct"],[37,17,40,17],[37,20,40,20,"parseFloat"],[37,30,40,30],[37,31,40,31,"_expoVirtualEnv"],[37,46,40,31],[37,47,40,31,"env"],[37,50,40,31],[37,51,40,31,"EXPO_PUBLIC_RANKER_CANARY_PCT"],[37,80,40,31],[37,84,40,76],[37,90,40,82],[37,91,40,83],[38,4,41,2],[38,8,41,8,"inCanary"],[38,16,41,16],[38,19,41,19,"inBucket"],[38,27,41,27],[38,28,41,28,"userId"],[38,34,41,34],[38,36,41,36,"canaryPct"],[38,45,41,45],[38,46,41,46],[39,4,43,2],[39,11,43,9],[40,6,44,4,"algorithm"],[40,15,44,13],[40,17,44,15,"inCanary"],[40,25,44,23],[40,28,44,26],[40,34,44,32],[40,37,44,35],[40,47,44,45],[41,6,45,4,"inCanary"],[42,4,46,2],[42,5,46,3],[43,2,47,0],[44,0,47,1],[44,3]],"functionMap":{"names":["<global>","hash32","inBucket","assignBucket","assignRankerTreatment"],"mappings":"AAA;OCK;CDM;OEE;CFE;OGQ;CHS;OIG"},"hasCjsExports":false},"type":"js/module"}]}