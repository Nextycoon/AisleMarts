{"dependencies":[{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"LRUMediaCache\", {\n    enumerable: true,\n    get: function () {\n      return LRUMediaCache;\n    }\n  });\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[0], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _babelRuntimeHelpersClassCallCheck = require(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\");\n  var _classCallCheck = _interopDefault(_babelRuntimeHelpersClassCallCheck);\n  var _babelRuntimeHelpersCreateClass = require(_dependencyMap[2], \"@babel/runtime/helpers/createClass\");\n  var _createClass = _interopDefault(_babelRuntimeHelpersCreateClass);\n  var LRUMediaCache = /*#__PURE__*/function () {\n    function LRUMediaCache() {\n      var maxBytes = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 75 * 1024 * 1024;\n      (0, _classCallCheck.default)(this, LRUMediaCache);\n      this.maxBytes = maxBytes;\n      this.map = new Map();\n      this.bytes = 0;\n    }\n    return (0, _createClass.default)(LRUMediaCache, [{\n      key: \"has\",\n      value: function has(k) {\n        return this.map.has(k);\n      }\n    }, {\n      key: \"put\",\n      value: function put(k) {\n        var size = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1_000_000;\n        if (this.map.has(k)) {\n          var v = this.map.get(k);\n          this.bytes -= v.size;\n          this.map.delete(k);\n        }\n        this.map.set(k, {\n          size\n        });\n        this.bytes += size;\n        while (this.bytes > this.maxBytes && this.map.size) {\n          var _this$map$entries$nex = (0, _slicedToArray.default)(this.map.entries().next().value, 2),\n            oldK = _this$map$entries$nex[0],\n            _v = _this$map$entries$nex[1];\n          this.map.delete(oldK);\n          this.bytes -= _v.size;\n        }\n      }\n    }, {\n      key: \"usageMB\",\n      value: function usageMB() {\n        return Math.round(this.bytes / 1024 / 1024);\n      }\n    }]);\n  }();\n});","lineCount":65,"map":[[12,2,1,0,"Object"],[12,8,1,0],[12,9,1,0,"defineProperty"],[12,23,1,0],[12,24,1,0,"exports"],[12,31,1,0],[13,4,1,0,"enumerable"],[13,14,1,0],[14,4,1,0,"get"],[14,7,1,0],[14,18,1,0,"get"],[14,19,1,0],[15,6,1,0],[15,13,1,0,"LRUMediaCache"],[15,26,1,0],[16,4,1,0],[17,2,1,0],[18,2,15,1],[18,6,15,1,"_babelRuntimeHelpersSlicedToArray"],[18,39,15,1],[18,42,15,1,"require"],[18,49,15,1],[18,50,15,1,"_dependencyMap"],[18,64,15,1],[19,2,15,1],[19,6,15,1,"_slicedToArray"],[19,20,15,1],[19,23,15,1,"_interopDefault"],[19,38,15,1],[19,39,15,1,"_babelRuntimeHelpersSlicedToArray"],[19,72,15,1],[20,2,15,1],[20,6,15,1,"_babelRuntimeHelpersClassCallCheck"],[20,40,15,1],[20,43,15,1,"require"],[20,50,15,1],[20,51,15,1,"_dependencyMap"],[20,65,15,1],[21,2,15,1],[21,6,15,1,"_classCallCheck"],[21,21,15,1],[21,24,15,1,"_interopDefault"],[21,39,15,1],[21,40,15,1,"_babelRuntimeHelpersClassCallCheck"],[21,74,15,1],[22,2,15,1],[22,6,15,1,"_babelRuntimeHelpersCreateClass"],[22,37,15,1],[22,40,15,1,"require"],[22,47,15,1],[22,48,15,1,"_dependencyMap"],[22,62,15,1],[23,2,15,1],[23,6,15,1,"_createClass"],[23,18,15,1],[23,21,15,1,"_interopDefault"],[23,36,15,1],[23,37,15,1,"_babelRuntimeHelpersCreateClass"],[23,68,15,1],[24,2,15,1],[24,6,1,13,"LRUMediaCache"],[24,19,1,26],[25,4,4,2],[25,13,4,2,"LRUMediaCache"],[25,27,4,2],[25,29,4,51],[26,6,4,51],[26,10,4,22,"maxBytes"],[26,18,4,30],[26,21,4,30,"arguments"],[26,30,4,30],[26,31,4,30,"length"],[26,37,4,30],[26,45,4,30,"arguments"],[26,54,4,30],[26,62,4,30,"undefined"],[26,71,4,30],[26,74,4,30,"arguments"],[26,83,4,30],[26,89,4,33],[26,91,4,35],[26,94,4,38],[26,98,4,42],[26,101,4,45],[26,105,4,49],[27,6,4,49],[27,10,4,49,"_classCallCheck"],[27,25,4,49],[27,26,4,49,"default"],[27,33,4,49],[27,41,4,49,"LRUMediaCache"],[27,54,4,49],[28,6,4,49],[28,11,4,22,"maxBytes"],[28,19,4,30],[28,22,4,22,"maxBytes"],[28,30,4,30],[29,6,4,30],[29,11,2,10,"map"],[29,14,2,13],[29,17,2,16],[29,21,2,20,"Map"],[29,24,2,23],[29,25,2,50],[29,26,2,51],[30,6,2,51],[30,11,3,10,"bytes"],[30,16,3,15],[30,19,3,18],[30,20,3,19],[31,4,4,52],[32,4,4,53],[32,15,4,53,"_createClass"],[32,27,4,53],[32,28,4,53,"default"],[32,35,4,53],[32,37,4,53,"LRUMediaCache"],[32,50,4,53],[33,6,4,53,"key"],[33,9,4,53],[34,6,4,53,"value"],[34,11,4,53],[34,13,5,2],[34,22,5,2,"has"],[34,25,5,5,"has"],[34,26,5,6,"k"],[34,27,5,15],[34,29,5,17],[35,8,5,19],[35,15,5,26],[35,19,5,30],[35,20,5,31,"map"],[35,23,5,34],[35,24,5,35,"has"],[35,27,5,38],[35,28,5,39,"k"],[35,29,5,40],[35,30,5,41],[36,6,5,43],[37,4,5,44],[38,6,5,44,"key"],[38,9,5,44],[39,6,5,44,"value"],[39,11,5,44],[39,13,6,2],[39,22,6,2,"put"],[39,25,6,5,"put"],[39,26,6,6,"k"],[39,27,6,15],[39,29,6,35],[40,8,6,35],[40,12,6,17,"size"],[40,16,6,21],[40,19,6,21,"arguments"],[40,28,6,21],[40,29,6,21,"length"],[40,35,6,21],[40,43,6,21,"arguments"],[40,52,6,21],[40,60,6,21,"undefined"],[40,69,6,21],[40,72,6,21,"arguments"],[40,81,6,21],[40,87,6,24],[40,96,6,33],[41,8,7,4],[41,12,7,8],[41,16,7,12],[41,17,7,13,"map"],[41,20,7,16],[41,21,7,17,"has"],[41,24,7,20],[41,25,7,21,"k"],[41,26,7,22],[41,27,7,23],[41,29,7,25],[42,10,7,27],[42,14,7,33,"v"],[42,15,7,34],[42,18,7,37],[42,22,7,41],[42,23,7,42,"map"],[42,26,7,45],[42,27,7,46,"get"],[42,30,7,49],[42,31,7,50,"k"],[42,32,7,51],[42,33,7,53],[43,10,7,55],[43,14,7,59],[43,15,7,60,"bytes"],[43,20,7,65],[43,24,7,69,"v"],[43,25,7,70],[43,26,7,71,"size"],[43,30,7,75],[44,10,7,77],[44,14,7,81],[44,15,7,82,"map"],[44,18,7,85],[44,19,7,86,"delete"],[44,25,7,92],[44,26,7,93,"k"],[44,27,7,94],[44,28,7,95],[45,8,7,97],[46,8,8,4],[46,12,8,8],[46,13,8,9,"map"],[46,16,8,12],[46,17,8,13,"set"],[46,20,8,16],[46,21,8,17,"k"],[46,22,8,18],[46,24,8,20],[47,10,8,22,"size"],[48,8,8,27],[48,9,8,28],[48,10,8,29],[49,8,8,31],[49,12,8,35],[49,13,8,36,"bytes"],[49,18,8,41],[49,22,8,45,"size"],[49,26,8,49],[50,8,9,4],[50,15,9,11],[50,19,9,15],[50,20,9,16,"bytes"],[50,25,9,21],[50,28,9,24],[50,32,9,28],[50,33,9,29,"maxBytes"],[50,41,9,37],[50,45,9,41],[50,49,9,45],[50,50,9,46,"map"],[50,53,9,49],[50,54,9,50,"size"],[50,58,9,54],[50,60,9,56],[51,10,10,6],[51,14,10,6,"_this$map$entries$nex"],[51,35,10,6],[51,42,10,6,"_slicedToArray"],[51,56,10,6],[51,57,10,6,"default"],[51,64,10,6],[51,66,10,24],[51,70,10,28],[51,71,10,29,"map"],[51,74,10,32],[51,75,10,33,"entries"],[51,82,10,40],[51,83,10,41],[51,84,10,42],[51,85,10,43,"next"],[51,89,10,47],[51,90,10,48],[51,91,10,49],[51,92,10,50,"value"],[51,97,10,55],[52,12,10,13,"oldK"],[52,16,10,17],[52,19,10,17,"_this$map$entries$nex"],[52,40,10,17],[53,12,10,19,"v"],[53,14,10,20],[53,17,10,20,"_this$map$entries$nex"],[53,38,10,20],[54,10,11,6],[54,14,11,10],[54,15,11,11,"map"],[54,18,11,14],[54,19,11,15,"delete"],[54,25,11,21],[54,26,11,22,"oldK"],[54,30,11,26],[54,31,11,27],[55,10,11,29],[55,14,11,33],[55,15,11,34,"bytes"],[55,20,11,39],[55,24,11,43,"v"],[55,26,11,44],[55,27,11,45,"size"],[55,31,11,49],[56,8,12,4],[57,6,13,2],[58,4,13,3],[59,6,13,3,"key"],[59,9,13,3],[60,6,13,3,"value"],[60,11,13,3],[60,13,14,2],[60,22,14,2,"usageMB"],[60,29,14,9,"usageMB"],[60,30,14,9],[60,32,14,12],[61,8,14,14],[61,15,14,21,"Math"],[61,19,14,25],[61,20,14,26,"round"],[61,25,14,31],[61,26,14,32],[61,30,14,36],[61,31,14,37,"bytes"],[61,36,14,42],[61,39,14,45],[61,43,14,49],[61,46,14,52],[61,50,14,56],[61,51,14,57],[62,6,14,59],[63,4,14,60],[64,2,14,60],[65,0,14,60],[65,3]],"functionMap":{"names":["<global>","LRUMediaCache","constructor","has","put","usageMB"],"mappings":"AAA,OC;ECG,mDD;EEC,0CF;EGC;GHO;EIC,0DJ"},"hasCjsExports":false},"type":"js/module"}]}